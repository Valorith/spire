(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7f5a6839"],{"1af6":function(e,t,n){var r=n("63b6");r(r.S,"Array",{isArray:n("9003")})},"20fd":function(e,t,n){"use strict";var r=n("d9f6"),a=n("aebd");e.exports=function(e,t,n){t in e?r.f(e,t,a(0,n)):e[t]=n}},"46f9":function(e,t,n){"use strict";var r=n("bd86"),a=function(){var e=this,t=e._self._c;return e.id?t("div",{style:e.getStyle(),on:{mouseover:function(t){e.hovered=!0},mouseout:function(t){e.hovered=!1}}},[e.label?t("span",[e._v(e._s(e.label))]):e._e(),t("input",{directives:[{name:"model",rawName:"v-model",value:e.inputVal,expression:"inputVal"}],staticClass:"eq-checkbox",attrs:{type:"checkbox",id:e.id,"true-value":e.trueValue,"false-value":e.falseValue,disabled:1===e.disabled},domProps:Object(r["a"])({checked:e.inputVal>0},"checked",Array.isArray(e.inputVal)?e._i(e.inputVal,null)>-1:e._q(e.inputVal,e.trueValue)),on:{change:[function(t){var n=e.inputVal,r=t.target,a=r.checked?e.trueValue:e.falseValue;if(Array.isArray(n)){var i=null,s=e._i(n,i);r.checked?s<0&&(e.inputVal=n.concat([i])):s>-1&&(e.inputVal=n.slice(0,s).concat(n.slice(s+1)))}else e.inputVal=a},function(t){return e.change()}]}}),t("label",{staticClass:"eq-checkbox-label",attrs:{for:e.id}}),e.labelRight?t("span",{staticClass:"ml-3"},[e._v(e._s(e.labelRight))]):e._e()]):e._e()},i=[],s=(n("6b54"),n("c5f6"),{name:"EqCheckbox",data:function(){return{id:"",hovered:!1}},computed:{inputVal:{get:function(){return this.value},set:function(e){this.$emit("input",e)}}},props:{isChecked:{type:Boolean,required:!1,default:!1},disabled:{default:0},fadeWhenNotTrue:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:""},labelRight:{type:String,required:!1,default:""},value:{type:[Number,String,Boolean],required:!1,default:0},trueValue:{type:[Number,String,Boolean],required:!1,default:1},falseValue:{type:[Number,String,Boolean],required:!1,default:0}},mounted:function(){this.init()},methods:{change:function(){this.$emit("change",this.value)},getStyle:function(){return this.fadeWhenNotTrue?this.hovered?"opacity: 1; font-weight: bold;":this.value!==this.trueValue?"opacity: .3":"opacity: 1":""},init:function(){this.id=this.randId()},randId:function(){return"_"+Math.random().toString(36).substr(2,9)}}}),o=s,l=n("2877"),u=Object(l["a"])(o,a,i,!1,null,null,null);t["a"]=u.exports},"504c":function(e,t,n){var r=n("9e1e"),a=n("0d58"),i=n("6821"),s=n("52a7").f;e.exports=function(e){return function(t){var n,o=i(t),l=a(o),u=l.length,c=0,d=[];while(u>c)n=l[c++],r&&!s.call(o,n)||d.push(e?[n,o[n]]:o[n]);return d}}},"549b":function(e,t,n){"use strict";var r=n("d864"),a=n("63b6"),i=n("241e"),s=n("b0dc"),o=n("3702"),l=n("b447"),u=n("20fd"),c=n("7cd6");a(a.S+a.F*!n("4ee1")((function(e){Array.from(e)})),"Array",{from:function(e){var t,n,a,d,f=i(e),b="function"==typeof this?this:Array,p=arguments.length,h=p>1?arguments[1]:void 0,v=void 0!==h,m=0,g=c(f);if(v&&(h=r(h,p>2?arguments[2]:void 0,2)),void 0==g||b==Array&&o(g))for(t=l(f.length),n=new b(t);t>m;m++)u(n,m,v?h(f[m],m):f[m]);else for(d=g.call(f),n=new b;!(a=d.next()).done;m++)u(n,m,v?s(d,h,[a.value,m],!0):a.value);return n.length=m,n}})},"768b":function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var r=n("f410"),a=n.n(r);function i(e){if(a()(e))return e}var s=n("f921"),o=n.n(s),l=n("d8d6"),u=n.n(l);function c(e,t){var n=null==e?null:"undefined"!=typeof o.a&&e[u.a]||e["@@iterator"];if(null!=n){var r,a,i,s,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=i.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){d=!0,a=e}finally{try{if(!c&&null!=n["return"]&&(s=n["return"](),Object(s)!==s))return}finally{if(d)throw a}}return l}}var d=n("e630");function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function b(e,t){return i(e)||c(e,t)||Object(d["a"])(e,t)||f()}},bd86:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("454f"),a=n.n(r),i=n("a6fa");function s(e,t,n){return(t=Object(i["a"])(t))in e?a()(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},d2d5:function(e,t,n){n("1654"),n("549b"),e.exports=n("584a").Array.from},db2a:function(e,t,n){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,"a",(function(){return r}))},dd86:function(e,t,n){"use strict";var r=function(){var e=this,t=e._self._c;return e.debug?t("div",{staticClass:"mt-4"},[t("h6",{staticClass:"eq-header"},[e._v("Debug")]),t("pre",{staticStyle:{"padding-top":"10px !important",width:"100%"}},[e._v(e._s(e.data))])]):e._e()},a=[],i=n("4ac1"),s=n("935a"),o=n("e327"),l=n("7b89"),u={name:"EqDebug",components:{EqWindow:s["a"]},props:{data:[Object,Array]},methods:{debugUpdatedListener:function(){this.debug="true"===l["a"].get("debug-mode")}},created:function(){o["a"].$on("DEBUG_UPDATED",this.debugUpdatedListener)},destroyed:function(){o["a"].$off("DEBUG_UPDATED",this.debugUpdatedListener)},data:function(){return{debug:i["a"].DEBUG}}},c=u,d=n("2877"),f=Object(d["a"])(c,r,a,!1,null,"16bdc7e8",null);t["a"]=f.exports},df7c:function(e,t,n){(function(e){function n(e,t){for(var n=0,r=e.length-1;r>=0;r--){var a=e[r];"."===a?e.splice(r,1):".."===a?(e.splice(r,1),n++):n&&(e.splice(r,1),n--)}if(t)for(;n--;n)e.unshift("..");return e}function r(e){"string"!==typeof e&&(e+="");var t,n=0,r=-1,a=!0;for(t=e.length-1;t>=0;--t)if(47===e.charCodeAt(t)){if(!a){n=t+1;break}}else-1===r&&(a=!1,r=t+1);return-1===r?"":e.slice(n,r)}function a(e,t){if(e.filter)return e.filter(t);for(var n=[],r=0;r<e.length;r++)t(e[r],r,e)&&n.push(e[r]);return n}t.resolve=function(){for(var t="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var s=i>=0?arguments[i]:e.cwd();if("string"!==typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,r="/"===s.charAt(0))}return t=n(a(t.split("/"),(function(e){return!!e})),!r).join("/"),(r?"/":"")+t||"."},t.normalize=function(e){var r=t.isAbsolute(e),s="/"===i(e,-1);return e=n(a(e.split("/"),(function(e){return!!e})),!r).join("/"),e||r||(e="."),e&&s&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(a(e,(function(e,t){if("string"!==typeof e)throw new TypeError("Arguments to path.join must be strings");return e})).join("/"))},t.relative=function(e,n){function r(e){for(var t=0;t<e.length;t++)if(""!==e[t])break;for(var n=e.length-1;n>=0;n--)if(""!==e[n])break;return t>n?[]:e.slice(t,n-t+1)}e=t.resolve(e).substr(1),n=t.resolve(n).substr(1);for(var a=r(e.split("/")),i=r(n.split("/")),s=Math.min(a.length,i.length),o=s,l=0;l<s;l++)if(a[l]!==i[l]){o=l;break}var u=[];for(l=o;l<a.length;l++)u.push("..");return u=u.concat(i.slice(o)),u.join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){if("string"!==typeof e&&(e+=""),0===e.length)return".";for(var t=e.charCodeAt(0),n=47===t,r=-1,a=!0,i=e.length-1;i>=1;--i)if(t=e.charCodeAt(i),47===t){if(!a){r=i;break}}else a=!1;return-1===r?n?"/":".":n&&1===r?"/":e.slice(0,r)},t.basename=function(e,t){var n=r(e);return t&&n.substr(-1*t.length)===t&&(n=n.substr(0,n.length-t.length)),n},t.extname=function(e){"string"!==typeof e&&(e+="");for(var t=-1,n=0,r=-1,a=!0,i=0,s=e.length-1;s>=0;--s){var o=e.charCodeAt(s);if(47!==o)-1===r&&(a=!1,r=s+1),46===o?-1===t?t=s:1!==i&&(i=1):-1!==t&&(i=-1);else if(!a){n=s+1;break}}return-1===t||-1===r||0===i||1===i&&t===r-1&&t===n+1?"":e.slice(t,r)};var i="b"==="ab".substr(-1)?function(e,t,n){return e.substr(t,n)}:function(e,t,n){return t<0&&(t=e.length+t),e.substr(t,n)}}).call(this,n("f28c"))},e630:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var r=n("d2d5"),a=n.n(r),i=n("db2a");function s(e,t){if(e){if("string"==typeof e)return Object(i["a"])(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?a()(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(i["a"])(e,t):void 0}}},f410:function(e,t,n){n("1af6"),e.exports=n("584a").Array.isArray},f50a:function(e,t,n){"use strict";n.r(t);n("ac6a"),n("456d");var r=function(){var e=this,t=e._self._c;return t("div",[t("eq-window",{attrs:{title:"Database Backup"}},[e._l(e.options,(function(n){return t("div",{key:n.key,staticClass:"row"},[t("div",{staticClass:"col-3 text-right mt-3"},[t("eq-checkbox",{staticClass:"d-inline-block",style:e.disabled[n.key]?"opacity: .3":"opacity: 1",attrs:{label:n.label,"fade-when-not-true":!0,"true-value":!0,"false-value":!1,disabled:e.loading},on:{input:function(t){return e.checked(n)}},model:{value:e.request[n.key],callback:function(t){e.$set(e.request,n.key,t)},expression:"request[o.key]"}})],1),t("div",{staticClass:"col-9"},[t("div",{staticClass:"text-muted mt-3"},[e._v("\n          "+e._s(n.desc)+"\n        ")])])])})),t("div",{staticClass:"row"},[t("div",{staticClass:"col-3 text-right mt-3"}),t("div",{staticClass:"col-9 text-left mt-3"},[t("button",{staticClass:"d-inline-block",style:e.loading?"opacity: .3":"opacity: 1",attrs:{disabled:e.loading},on:{click:e.backup}},[e._v("\n          Backup\n        ")])])]),e.downloading?t("div",{staticClass:"row"},[t("div",{staticClass:"col-3 text-right mt-3"}),t("div",{staticClass:"col-9 text-left mt-3 font-weight-bold"},[e._v("\n        Downloading file...\n      ")])]):e._e(),t("div",{staticClass:"row"},[t("div",{staticClass:"col-12 text-left mt-3"},[t("info-error-banner",{staticClass:"mb-3",attrs:{slim:!0,notification:e.notification,error:e.error},on:{"dismiss-error":function(t){e.error=""},"dismiss-notification":function(t){e.notification=""}}})],1)]),t("eq-debug",{attrs:{data:e.request}})],2),e.loading||e.backupResult&&Object.keys(e.backupResult).length>0?t("eq-window",{attrs:{title:"Backup Result"}},[t("app-loader",{attrs:{"is-loading":e.loading}}),e.backupResult&&Object.keys(e.backupResult).length>0?t("div",[t("span",{staticClass:"font-weight-bold"},[e._v("Command")]),e.backupResult.command?t("pre",{staticStyle:{width:"100%"}},[e._v(e._s(e.backupResult.command))]):e._e(),t("span",{staticClass:"font-weight-bold"},[e._v("Output")]),e.backupResult.command?t("pre",{staticStyle:{width:"100%"}},[e._v(e._s(e.backupResult.stdout))]):e._e()]):e._e()],1):e._e()],1)},a=[],i=(n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("28a5"),n("96cf"),n("3b8d")),s=(n("6762"),n("2fdb"),n("768b")),o=(n("ffc1"),n("935a")),l=n("46f9"),u=n("dd86"),c=n("0d95"),d=n("5afa"),f=n("df7c");function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=p(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){o=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(o)throw i}}}}function p(e,t){if(e){if("string"==typeof e)return h(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var v={name:"DatabaseBackup",components:{InfoErrorBanner:d["a"],EqDebug:u["a"],EqCheckbox:l["a"],EqWindow:o["a"]},data:function(){return{loading:!1,downloading:!1,backupResult:{},options:[{label:"All Tables",key:"dump_all_tables",desc:"This will backup everything in your database with no exclusions"},{label:"Content Tables",key:"content_tables",desc:"Dump content tables"},{label:"Player Tables",key:"player_tables",desc:"Dump player tables"},{label:"Bot Tables",key:"bot_tables",desc:"Dump bot tables"},{label:"State Tables",key:"state_tables",desc:"Dump state tables"},{label:"System Tables",key:"system_tables",desc:"Dump system tables"},{label:"Login Tables",key:"login_tables",desc:"Dump login tables"},{label:"Compress",key:"compress",desc:"Compresses the dump with the available compression found in the operating system"}],disabled:{},request:{dump_all_tables:!0,content_tables:!1,player_tables:!1,bot_tables:!1,state_tables:!1,system_tables:!1,query_serv_tables:!1,login_tables:!1,compress:!0},notification:"",error:""}},destroyed:function(){window.removeEventListener("file-download-progress",this.handleFileDownloadProgress,!1)},created:function(){window.addEventListener("file-download-progress",this.handleFileDownloadProgress),this.reset()},methods:{handleFileDownloadProgress:function(e){this.awaitingDownload&&(this.awaitingDownload=!1),e.detail.downloadedMbytes!==this.downloadedMbytes&&(this.fileDownloadProgress=e.detail.percent,this.lastPercent=e.detail.percent,this.downloadedMbytes=Math.round(e.detail.loaded/1024/1024),this.downloadedBytes=e.detail.loaded,this.totalBytes=e.detail.total)},reset:function(){for(var e=0,t=Object.entries(this.request);e<t.length;e++){var n=Object(s["a"])(t[e],2),r=n[0];n[1];["dump_all_tables","compress"].includes(r)||(this.disabled[r]=1,this.request[r]=!1)}},checked:function(e){if("compress"!==e.key)if(this.disabled={},"dump_all_tables"===e.key&&this.request[e.key])for(var t=0,n=Object.entries(this.request);t<n.length;t++){var r=Object(s["a"])(n[t],2),a=r[0];r[1];["dump_all_tables","compress"].includes(a)||(this.disabled[a]=1,this.request[a]=!1)}else{for(var i=!1,o=0,l=Object.entries(this.request);o<l.length;o++){var u=Object(s["a"])(l[o],2),c=u[0];u[1];this.request[c]&&"compress"!==c&&(i=!0)}i?(this.disabled["dump_all_tables"]=1,this.request["dump_all_tables"]=!1):(this.disabled["dump_all_tables"]=0,this.request["dump_all_tables"]=!0),this.$forceUpdate()}},backup:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.backupResult={},this.loading=!0,setTimeout(Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c["SpireApi"].v1().post("/backup/mysql",t.request);case 3:if(n=e.sent,200!==n.status){e.next=26;break}t.backupResult=n.data,t.loading=!1,n.data.file_path&&t.downloadBackup(f["basename"](n.data.file_path)),r=b(n.data.stdout.split("\n")),e.prev=9,r.s();case 11:if((a=r.n()).done){e.next=18;break}if(i=a.value,!i.includes("Error")){e.next=16;break}return t.error=i,e.abrupt("break",18);case 16:e.next=11;break;case 18:e.next=23;break;case 20:e.prev=20,e.t0=e["catch"](9),r.e(e.t0);case 23:return e.prev=23,r.f(),e.finish(23);case 26:e.next=31;break;case 28:e.prev=28,e.t1=e["catch"](0),e.t1.response&&e.t1.response.data&&e.t1.response.data.error&&(t.error=e.t1.response.data.error,t.loading=!1);case 31:case"end":return e.stop()}}),e,null,[[0,28],[9,20,23,26]])}))),1);case 3:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),downloadBackup:function(){var e=Object(i["a"])(regeneratorRuntime.mark((function e(t){var n,r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.downloading=!0,e.prev=1,e.next=4,c["SpireApi"].v1().request("/backup/mysql-dump-download/"+t,{responseType:"blob"});case 4:return n=e.sent,console.log(n.data),r=URL.createObjectURL(n.data),a=document.createElement("a"),a.href=r,a.setAttribute("download",t),document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(r),this.downloading=!1,e.abrupt("return",n);case 18:e.prev=18,e.t0=e["catch"](1),e.t0.response&&e.t0.response.data&&e.t0.response.data.error&&(this.error=e.t0.response.data.error,this.loading=!1);case 21:case"end":return e.stop()}}),e,this,[[1,18]])})));function t(t){return e.apply(this,arguments)}return t}()}},m=v,g=n("2877"),y=Object(g["a"])(m,r,a,!1,null,"4ae143ee",null);t["default"]=y.exports},ffc1:function(e,t,n){var r=n("5ca1"),a=n("504c")(!0);r(r.S,"Object",{entries:function(e){return a(e)}})}}]);