(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0b93299d"],{"02f6":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid content-area"},[e("div",{staticClass:"panel-body"},[e("div",{staticClass:"panel panel-default"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 mt-3"},[t._t("default")],2)])])])])},n=[],i={name:"ContentArea"},o=i,r=a("2877"),l=Object(r["a"])(o,s,n,!1,null,"4665fdac",null);e["a"]=l.exports},"46f9":function(t,e,a){"use strict";var s=a("bd86"),n=function(){var t=this,e=t._self._c;return t.id?e("div",{style:t.getStyle(),on:{mouseover:function(e){t.hovered=!0},mouseout:function(e){t.hovered=!1}}},[t.label?e("span",[t._v(t._s(t.label))]):t._e(),e("input",{directives:[{name:"model",rawName:"v-model",value:t.inputVal,expression:"inputVal"}],staticClass:"eq-checkbox",attrs:{type:"checkbox",id:t.id,"true-value":t.trueValue,"false-value":t.falseValue,disabled:1===t.disabled},domProps:Object(s["a"])({checked:t.inputVal>0},"checked",Array.isArray(t.inputVal)?t._i(t.inputVal,null)>-1:t._q(t.inputVal,t.trueValue)),on:{change:[function(e){var a=t.inputVal,s=e.target,n=s.checked?t.trueValue:t.falseValue;if(Array.isArray(a)){var i=null,o=t._i(a,i);s.checked?o<0&&(t.inputVal=a.concat([i])):o>-1&&(t.inputVal=a.slice(0,o).concat(a.slice(o+1)))}else t.inputVal=n},function(e){return t.change()}]}}),e("label",{staticClass:"eq-checkbox-label",attrs:{for:t.id}}),t.labelRight?e("span",{staticClass:"ml-3"},[t._v(t._s(t.labelRight))]):t._e()]):t._e()},i=[],o=(a("6b54"),a("c5f6"),{name:"EqCheckbox",data:function(){return{id:"",hovered:!1}},computed:{inputVal:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},props:{isChecked:{type:Boolean,required:!1,default:!1},disabled:{default:0},fadeWhenNotTrue:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:""},labelRight:{type:String,required:!1,default:""},value:{type:[Number,String,Boolean],required:!1,default:0},trueValue:{type:[Number,String,Boolean],required:!1,default:1},falseValue:{type:[Number,String,Boolean],required:!1,default:0}},mounted:function(){this.init()},methods:{change:function(){this.$emit("change",this.value)},getStyle:function(){return this.fadeWhenNotTrue?this.hovered?"opacity: 1; font-weight: bold;":this.value!==this.trueValue?"opacity: .3":"opacity: 1":""},init:function(){this.id=this.randId()},randId:function(){return"_"+Math.random().toString(36).substr(2,9)}}}),r=o,l=a("2877"),u=Object(l["a"])(r,n,i,!1,null,null,null);e["a"]=u.exports},"622f":function(t,e,a){"use strict";a.r(e);a("ac6a"),a("456d");var s=function(){var t=this,e=t._self._c;return e("content-area",{staticClass:"text-center fade-in"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-sm-12 col-lg-6 justify-content-center"},[e("h1",{staticClass:"text-center eq-header small-mobile",staticStyle:{"font-size":"100px"}},[t._v("Spire Setup")]),e("info-error-banner",{staticClass:"mt-0",attrs:{slim:!0,notification:t.notification,error:t.error},on:{"dismiss-error":function(e){t.error=""},"dismiss-notification":function(e){t.notification=""}}}),e("div",{staticStyle:{height:"85vh","overflow-y":"scroll","overflow-x":"hidden"}},[e("eq-window",[e("p",{staticClass:"m-0",staticStyle:{"font-size":"14px"}},[t._v("\n            It appears that you are using Spire for the first time. Let's walk you through a brief setup...\n          ")])]),e("eq-window",{staticClass:"mt-5",attrs:{title:"Settings"}},[e("div",{staticClass:"row mt-3 unselectable"},[e("div",{staticClass:"col-6 text-right"},[e("div",{staticClass:"font-weight-bold mb-3"},[t._v("Authentication")]),t._v("\n              Do you want Spire to run with authentication? "),e("br"),e("small",{staticClass:"text-muted"},[t._v("(This will require a user login in order to use this instance of\n                Spire.)")])]),e("div",{staticClass:"col-6 text-left"},[e("eq-checkbox",{staticClass:"mt-4",model:{value:t.form.auth_enabled,callback:function(e){t.$set(t.form,"auth_enabled",t._n(e))},expression:"form.auth_enabled"}})],1)]),t.form.auth_enabled?e("div",{staticClass:"row mt-3 unselectable"},[e("div",{staticClass:"col-6 text-right"},[e("div",{staticClass:"font-weight-bold"},[t._v("Username")]),e("small",{staticClass:"text-muted"},[t._v("(This will be the administrator user for your Spire)")]),e("small",{staticClass:"d-block"},[t._v("If you are using this only for yourself locally, you don't need\n                authentication.")])]),e("div",{staticClass:"col-6 text-left"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.username,expression:"form.username"}],staticClass:"form-control",attrs:{placeholder:"Your username..."},domProps:{value:t.form.username},on:{input:function(e){e.target.composing||t.$set(t.form,"username",e.target.value)}}})])]):t._e(),t.form.auth_enabled?e("div",{staticClass:"row mt-3 unselectable"},[e("div",{staticClass:"col-6 text-right"},[e("div",{staticClass:"font-weight-bold mb-3"},[t._v("Password")])]),e("div",{staticClass:"col-6 text-left"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.form.password,expression:"form.password"}],staticClass:"form-control",attrs:{type:"password",placeholder:"Your password..."},domProps:{value:t.form.password},on:{input:function(e){e.target.composing||t.$set(t.form,"password",e.target.value)}}})])]):t._e()]),e("eq-window",{staticClass:"mt-5",attrs:{title:"Database"}},[e("small",[t._v("\n            Spire will use your database to store settings and configuration as it relates to Spire and will use your\n            EverQuest Emulator database instance for communication with tooling. This user must have access to create\n            tables within the following database.\n          ")]),t.connection&&Object.keys(t.connection).length>0?e("div",{staticClass:"mt-3"},t._l(t.connfields,(function(a){return e("div",{staticClass:"row"},[e("div",{staticClass:"col-6 text-right"},[e("div",{staticClass:"font-weight-bold"},[t._v(t._s(a.field))])]),a.value&&t.connection[a.value]?e("div",{staticClass:"col-6 text-left"},[t._v("\n                "+t._s(t.formatConnectionValue(a.field,t.connection[a.value]))+"\n              ")]):t._e(),a.value&&!t.connection[a.value]?e("div",{staticClass:"col-6 text-left"},[t._v("\n                "+t._s(a.value)+"\n              ")]):t._e()])})),0):t._e()]),e("eq-window",{staticClass:"mt-5",attrs:{title:"Installation Actions"}},[t.form.auth_enabled?e("div",{staticClass:"mt-3"},[e("small",{staticClass:"font-weight-bold"},[t._v("\n              Spire will enable authentication\n            ")])]):t._e(),t.form.auth_enabled&&t.form.username&&t.form.username.length>0?e("div",{staticClass:"mt-3"},[e("small",{staticClass:"font-weight-bold"},[t._v("\n              Spire will create the following admin user ("+t._s(t.form.username)+")\n            ")])]):t._e(),t.tables?e("div",{staticClass:"mt-3"},[e("small",{staticClass:"font-weight-bold"},[t._v("\n              Spire install the following tables ("+t._s(t.tables.length)+")\n            ")])]):t._e(),e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-lg-4 col-sm-12"},[t.tables&&Object.keys(t.tables).length>0?e("div",{staticClass:"mt-3"},t._l(t.tables,(function(a){return e("div",{staticClass:"text-left"},[e("div",{},[t._v("â€¢ "+t._s(a))])])})),0):t._e()])]),e("button",{staticClass:"eq-button",style:"opacity: "+(t.result&&Object.keys(t.result).length>0?".5":"1"),attrs:{disabled:t.result&&Object.keys(t.result).length>0},on:{click:t.finish}},[t._v("Finish\n          ")]),t.debug?e("eq-window",[e("eq-debug",{staticClass:"text-left",attrs:{data:t.result}}),e("eq-debug",{staticClass:"text-left",attrs:{data:t.form}}),e("eq-debug",{staticClass:"text-left",attrs:{data:t.connection}}),e("eq-debug",{staticClass:"text-left",attrs:{data:t.tables}})],1):t._e()],1)],1)],1)])])},n=[],i=(a("96cf"),a("3b8d")),o=a("02f6"),r=a("49c5"),l=a("80b0"),u=a("935a"),c=a("46f9"),d=a("0d95"),f=a("dd86"),h=a("7b89"),m=a("5afa"),b={name:"Login.vue",components:{InfoErrorBanner:m["a"],EqDebug:f["a"],EqCheckbox:c["a"],EqWindow:u["a"],ContentArea:o["a"]},data:function(){return{debug:!1,githubAuthEnabled:r["a"].isGithubAuthEnabled(),ROUTE:l["a"],error:"",notification:"",form:{auth_enabled:0,username:"",password:""},connection:{},tables:{},result:{},connfields:[{field:"Source",value:"Emulator Server Configuration"},{field:"Host",value:"Addr"},{field:"Database",value:"DBName"},{field:"Collation",value:"Collation"},{field:"Max Allowed Packet",value:"MaxAllowedPacket"}]}},mounted:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.debug="true"===h["a"].get("debug-mode"),t.next=3,d["SpireApi"].v1().get("/app/onboarding-info");case 3:e=t.sent,e.data&&e.data.data&&(this.connection=e.data.data.connection_info,this.tables=e.data.data.tables);case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{finish:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a,s=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!confirm("Are you sure this is how you want to install your Spire installation?")){t.next=17;break}return t.prev=1,t.next=4,d["SpireApi"].v1().post("/app/onboard-initialize",this.form);case 4:if(e=t.sent,!e.data||200!==e.status){t.next=12;break}return this.result=e.data,this.notification="Installation succeeded! Redirecting momentarily...",t.next=10,r["a"].init();case 10:a=t.sent,a&&setTimeout((function(){s.$router.push(l["a"].HOME).catch((function(t){}))}),3e3);case 12:t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](1),t.t0.response&&t.t0.response.data&&t.t0.response.data.error&&(this.error=t.t0.response.data.error);case 17:case"end":return t.stop()}}),t,this,[[1,14]])})));function e(){return t.apply(this,arguments)}return e}(),hasAuthOptions:function(){return this.githubAuthEnabled},formatConnectionValue:function(t,e){return"Max Allowed Packet"===t?this.formatBytes(e):e},formatBytes:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!+t)return"0 Bytes";var a=1024,s=e<0?0:e,n=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.floor(Math.log(t)/Math.log(a));return"".concat(parseFloat((t/Math.pow(a,i)).toFixed(s))," ").concat(n[i])}}},v=b,p=a("2877"),g=Object(p["a"])(v,s,n,!1,null,null,null);e["default"]=g.exports},bd86:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var s=a("454f"),n=a.n(s),i=a("a6fa");function o(t,e,a){return(e=Object(i["a"])(e))in t?n()(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},dd86:function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return t.debug?e("div",{staticClass:"mt-4"},[e("h6",{staticClass:"eq-header"},[t._v("Debug")]),e("pre",{staticStyle:{"padding-top":"10px !important",width:"100%"}},[t._v(t._s(t.data))])]):t._e()},n=[],i=a("4ac1"),o=a("935a"),r=a("e327"),l=a("7b89"),u={name:"EqDebug",components:{EqWindow:o["a"]},props:{data:[Object,Array]},methods:{debugUpdatedListener:function(){this.debug="true"===l["a"].get("debug-mode")}},created:function(){r["a"].$on("DEBUG_UPDATED",this.debugUpdatedListener)},destroyed:function(){r["a"].$off("DEBUG_UPDATED",this.debugUpdatedListener)},data:function(){return{debug:i["a"].DEBUG}}},c=u,d=a("2877"),f=Object(d["a"])(c,s,n,!1,null,"16bdc7e8",null);e["a"]=f.exports}}]);