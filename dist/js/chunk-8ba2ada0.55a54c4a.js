(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8ba2ada0"],{"0059":function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t._self._c;return e("div",[0===t.logCategories.length?e("eq-window",[t._v("\n      Zone not loaded\n  ")]):t._e(),t.logCategories.length>0?e("div",{staticClass:"row"},[e("div",{staticClass:"col-lg-2 order-lg-0 mb-4 pr-0"},[e("eq-window-simple",{staticClass:"pt-0 pb-0 mt-0 pl-3 pr-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-2 p-0",staticStyle:{"margin-top":"4px"}},[e("button",{staticClass:"btn btn-sm btn-white ml-auto",attrs:{type:"submit",title:"Clear all categories"},on:{click:function(e){return t.clearCategories()}}},[e("i",{staticClass:"fa fa-eraser pr-1"})])]),e("div",{staticClass:"col-10 p-0"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.categoryFilter,expression:"categoryFilter"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Filter categories...",autofocus:"",value:""},domProps:{value:t.categoryFilter},on:{keyup:function(e){return t.updateQueryState()},input:function(e){e.target.composing||(t.categoryFilter=e.target.value)}}})])])]),e("eq-window-simple",{staticClass:"p-0"},[e("div",{staticStyle:{height:"76vh","overflow-y":"scroll","overflow-x":"hidden"}},t._l(t.filteredLogCategories,(function(n,o){return e("label",{key:o,staticClass:"custom-control custom-checkbox pl-0"},[e("eq-checkbox",{attrs:{"label-right":n.log_category_description+" ("+n.log_category_id+")","fade-when-not-true":!0,"true-value":1,"false-value":0},on:{change:function(e){return t.updateCategoryLevel(n)}},model:{value:n.log_to_console,callback:function(e){t.$set(n,"log_to_console",e)},expression:"category.log_to_console"}})],1)})),0)])],1),e("div",{staticClass:"col-lg-10"},[e("eq-window-simple",{staticClass:"pt-0 pb-0 mt-0"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-1 p-0 mt-1 text-center"},[e("button",{staticClass:"btn btn-sm btn-white ml-auto",attrs:{type:"submit",title:"Clear all logs"},on:{click:function(e){return t.clearLogs()}}},[e("i",{staticClass:"fa fa-history pr-1"})]),t.isPaused?t._e():e("button",{staticClass:"btn btn-sm btn-warning ml-1",attrs:{type:"submit",title:"Pause"},on:{click:function(e){t.isPaused=!0}}},[e("i",{staticClass:"fa fa-pause pr-1"})]),t.isPaused?e("button",{staticClass:"btn btn-sm btn-primary ml-1",attrs:{type:"submit",title:"Resume"},on:{click:function(e){t.isPaused=!1}}},[e("i",{staticClass:"fa fa-play pr-1"})]):t._e(),e("b-button",{staticClass:"btn-white btn-sm ml-1",attrs:{title:"Copy to clipboard"},on:{click:function(e){return t.copyFileContentsToClipboard()}}},[e("i",{staticClass:"fa fa-copy"})])],1),e("div",{staticClass:"col-11"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.textFilter,expression:"textFilter"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Text filter...",autofocus:"",value:""},domProps:{value:t.textFilter},on:{change:function(e){return t.updateQueryState()},input:function(e){e.target.composing||(t.textFilter=e.target.value)}}})])])]),e("eq-window-simple",{staticClass:"p-0"},[e("pre",{staticClass:"highlight html bg-dark hljs xml mb-0",staticStyle:{color:"rgb(235 235 235)",height:"76vh","overflow-y":"scroll",width:"100%"},attrs:{id:"log-contents"}},[t._v(t._s(t.logData))])])],1)]):t._e()],1)},i=[],a=(n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("7f7f"),n("6b54"),n("28a5"),n("6762"),n("2fdb"),n("ac6a"),n("55dd"),n("96cf"),n("3b8d")),r=(n("a481"),n("d225")),s=n("b0b4"),l=n("9ab4"),u=n("3022"),c=n("0d95"),d=function(){function t(){Object(r["a"])(this,t),this.uuid="",this.ws=null,this.port=0,this.methods={SUBSCRIBE:"subscribe",GET_LOGSYS_CATEGORIES:"get_logsys_categories",SET_LOGGING_LEVEL:"set_logging_level",GET_ZONE_ATTRIBUTES:"get_zone_attributes"},this.subscriptions={LOGGING:1}}return Object(s["a"])(t,[{key:"initClient",value:function(t){return Object(l["d"])(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.ws=new Promise((function(e,o){return Object(l["d"])(n,void 0,void 0,regeneratorRuntime.mark((function n(){var i,a,r=this;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,c["SpireApi"].v1().get("eqemuserver/get-websocket-auth");case 2:i=n.sent,a=null,200===i.status&&(a=i.data),this.port=t,this.ws=new WebSocket("ws://"+location.hostname+":"+t),this.uuid=this.generateUUID(),console.log(a),this.ws.onerror=function(t){r.log(u["format"]("Error %s",JSON.stringify(t))),o(t)},this.ws.onclose=function(t){r.log(u["format"]("Closed %s",JSON.stringify(t))),o(t)};try{this.ws.onopen=function(t){console.log("open"),r.log(u["format"]("Opened %s",JSON.stringify(t))),r.send("login",[a.account_name,a.password]),r.ws.onmessage=function(t){var n=JSON.parse(t.data),o=n&&n.data&&"Ok"===n.data.status&&"login"==n.method;o&&e(r.ws)}}}catch(s){console.log("Open"+s)}case 12:case"end":return n.stop()}}),n,this)})))})),e.abrupt("return",this.ws);case 2:case"end":return e.stop()}}),e,this)})))}},{key:"log",value:function(t){console.log("[EqemuWebsocketClient] Port: %s | %s",this.port,t)}},{key:"send",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];this.log(u["format"]("Method: '%s' Params %s",t,JSON.stringify(e))),this.ws.send(JSON.stringify({id:this.uuid,method:t,params:e},null,2))}},{key:"subscribeToLogging",value:function(){this.send(this.methods.SUBSCRIBE,[this.subscriptions.LOGGING])}},{key:"getLogCategories",value:function(){this.send(this.methods.GET_LOGSYS_CATEGORIES)}},{key:"getZoneAttributes",value:function(){this.send(this.methods.GET_ZONE_ATTRIBUTES)}},{key:"setLoggingLevel",value:function(t,e){this.send(this.methods.SET_LOGGING_LEVEL,[t,e])}},{key:"generateUUID",value:function(){var t=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var n=(t+16*Math.random())%16|0;return t=Math.floor(t/16),("x"===e?n:3&n|8).toString(16)}))}}])}(),g=n("093e"),f=n("46f9"),h=n("d78b"),p=n("80b0"),m=n("a2aa"),v=n("935a"),y=n("1f51");function b(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!n){if(Array.isArray(t)||(n=C(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var o=0,i=function(){};return{s:i,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,s=!1;return{s:function(){n=n.call(t)},n:function(){var t=n.next();return r=t.done,t},e:function(t){s=!0,a=t},f:function(){try{r||null==n.return||n.return()}finally{if(s)throw a}}}}function C(t,e){if(t){if("string"==typeof t)return w(t,e);var n={}.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(t,e):void 0}}function w(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}var _=3e5,x={components:{EqWindow:v["a"],EqCheckbox:f["a"],EqWindowSimple:g["a"]},data:function(){return{logCategories:[],filteredLogCategories:[],logData:"",zonePort:0,zoneAttributes:null,wsEqemuClient:null,ws:null,panelHeight:0,textFilter:"",categoryFilter:"",isPaused:!1}},beforeDestroy:function(){h["a"].expand()},watch:{$route:function(){this.loadQueryState(),this.init()}},created:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loadQueryState(),setTimeout((function(){h["a"].collapse()}),100),this.$route.meta.title="Zone Log Streaming",this.$route.query.zone&&(this.$route.meta.title="Zone Log Streaming (".concat(this.$route.query.zone,")")),this.zonePort=this.$route.params.port,this.wsEqemuClient=new d,t.next=8,this.wsEqemuClient.initClient(this.zonePort);case 8:this.ws=t.sent,this.wsEqemuClient.subscribeToLogging(),this.wsEqemuClient.getLogCategories(),this.ws.onmessage=function(t){var n=JSON.parse(t.data);if(n.method===e.wsEqemuClient.methods.GET_LOGSYS_CATEGORIES){var o=n.data;if(o.sort((function(t,e){var n=t.log_category_description.toUpperCase(),o=e.log_category_description.toUpperCase();return n<o?-1:n>o?1:0})),o.forEach((function(t){t.log_to_console=t.log_to_console>0?1:0})),e.logCategories=o,e.categoryFilter&&""!==e.categoryFilter){var i=e.categoryFilter;e.filteredLogCategories=o.filter((function(t){return t.log_category_description.toLowerCase().includes(i)}))}else e.filteredLogCategories=o}if(n.method===e.wsEqemuClient.methods.GET_ZONE_ATTRIBUTES&&(e.zoneAttributes=n.data),n.event===e.wsEqemuClient.subscriptions.LOGGING&&!e.isPaused){var a=e.logTimeStamp()+" | "+n.data.msg+"\n"+e.logData,r=a.substring(0,_);e.textFilter&&(r=r.split("\n").filter((function(t){return t.toLowerCase().includes(e.textFilter.toLowerCase())})).join("\n")),e.logData=r}};case 12:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),destroyed:function(){this.ws&&this.ws.close()},methods:{clearCategories:function(){var t,e=b(this.logCategories);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.log_category_description.toLowerCase().includes("info")||(n.log_to_console=0,this.updateCategoryLevel(n))}}catch(o){e.e(o)}finally{e.f()}},init:function(){if(this.logCategories.length>0)if(this.categoryFilter&&""!==this.categoryFilter){var t=this.categoryFilter;this.filteredLogCategories=this.logCategories.filter((function(e){return e.log_category_description.toLowerCase().includes(t)}))}else this.filteredLogCategories=this.logCategories},logTimeStamp:function(){var t=new Date,e=[t.getMonth()+1,t.getDate(),t.getFullYear()],n=[t.getHours(),t.getMinutes(),t.getSeconds()],o=n[0]<12?"AM":"PM";n[0]=n[0]<12?n[0]:n[0]-12,n[0]=n[0]||12;var i=t.getMilliseconds();i<10?i="00"+i:i<100&&(i="0"+i);for(var a=1;a<3;a++)n[a]<10&&(n[a]="0"+n[a]);return e.join("/")+" "+n.join(":")+i+" "+o},clearLogs:function(){this.logData=""},updateCategoryLevel:function(t){this.wsEqemuClient.setLoggingLevel(t.log_category_id,t.log_to_console?3:0)},updateQueryState:function(){var t={};""!==this.npcNameSearch&&(t.q=this.textFilter),""!==this.categoryFilter&&(t.category=this.categoryFilter),this.$router.push({path:p["a"].ADMIN_ZONESERVERS_LOGS.replaceAll(":port",this.$route.params.port),query:t}).catch((function(){}))},loadQueryState:function(){""!==this.$route.query.q&&(this.textFilter=this.$route.query.q),""!==this.$route.query.category&&(this.categoryFilter=this.$route.query.category)},copyFileContentsToClipboard:function(){m["a"].copyFromElement("log-contents"),y["a"].toast("Copied logs to clipboard")}}},S=x,E=n("2877"),q=Object(E["a"])(S,o,i,!1,null,null,null);e["default"]=q.exports},"093e":function(t,e,n){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{staticClass:"eq-window-simple"},[t.title?e("div",{staticClass:"eq-window-title-bar",style:"font-weight: "+(t.boldTitle?"bold":"normal")+";"},[t._v(t._s(t.title)+"\n  ")]):t._e(),e("div",{class:t.classes,style:"padding: "+("undefined"!==typeof t.padding?t.padding:10)+"px"},[t._t("default")],2)])},i=[],a=(n("c5f6"),{name:"EqWindowSimple",props:{title:{type:String,required:!1},padding:{type:Number,required:!1,default:10},classes:{type:String,required:!1,default:""},boldTitle:{type:Boolean,required:!1,default:!1}}}),r=a,s=n("2877"),l=Object(s["a"])(r,o,i,!1,null,"4db0cdea",null);e["a"]=l.exports},"2f21":function(t,e,n){"use strict";var o=n("79e5");t.exports=function(t,e){return!!t&&o((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},"46f9":function(t,e,n){"use strict";var o=n("bd86"),i=function(){var t=this,e=t._self._c;return t.id?e("div",{style:t.getStyle(),on:{mouseover:function(e){t.hovered=!0},mouseout:function(e){t.hovered=!1}}},[t.label?e("span",[t._v(t._s(t.label))]):t._e(),e("input",{directives:[{name:"model",rawName:"v-model",value:t.inputVal,expression:"inputVal"}],staticClass:"eq-checkbox",attrs:{type:"checkbox",id:t.id,"true-value":t.trueValue,"false-value":t.falseValue,disabled:1===t.disabled},domProps:Object(o["a"])({checked:t.inputVal>0},"checked",Array.isArray(t.inputVal)?t._i(t.inputVal,null)>-1:t._q(t.inputVal,t.trueValue)),on:{change:[function(e){var n=t.inputVal,o=e.target,i=o.checked?t.trueValue:t.falseValue;if(Array.isArray(n)){var a=null,r=t._i(n,a);o.checked?r<0&&(t.inputVal=n.concat([a])):r>-1&&(t.inputVal=n.slice(0,r).concat(n.slice(r+1)))}else t.inputVal=i},function(e){return t.change()}]}}),e("label",{staticClass:"eq-checkbox-label",attrs:{for:t.id}}),t.labelRight?e("span",{staticClass:"ml-3"},[t._v(t._s(t.labelRight))]):t._e()]):t._e()},a=[],r=(n("6b54"),n("c5f6"),{name:"EqCheckbox",data:function(){return{id:"",hovered:!1}},computed:{inputVal:{get:function(){return this.value},set:function(t){this.$emit("input",t)}}},props:{isChecked:{type:Boolean,required:!1,default:!1},disabled:{default:0},fadeWhenNotTrue:{type:Boolean,required:!1,default:!1},label:{type:String,required:!1,default:""},labelRight:{type:String,required:!1,default:""},value:{type:[Number,String,Boolean],required:!1,default:0},trueValue:{type:[Number,String,Boolean],required:!1,default:1},falseValue:{type:[Number,String,Boolean],required:!1,default:0}},mounted:function(){this.init()},methods:{change:function(){this.$emit("change",this.value)},getStyle:function(){return this.fadeWhenNotTrue?this.hovered?"opacity: 1; font-weight: bold;":this.value!==this.trueValue?"opacity: .3":"opacity: 1":""},init:function(){this.id=this.randId()},randId:function(){return"_"+Math.random().toString(36).substr(2,9)}}}),s=r,l=n("2877"),u=Object(l["a"])(s,i,a,!1,null,null,null);e["a"]=u.exports},"55dd":function(t,e,n){"use strict";var o=n("5ca1"),i=n("d8e8"),a=n("4bf8"),r=n("79e5"),s=[].sort,l=[1,2,3];o(o.P+o.F*(r((function(){l.sort(void 0)}))||!r((function(){l.sort(null)}))||!n("2f21")(s)),"Array",{sort:function(t){return void 0===t?s.call(a(this)):s.call(a(this),i(t))}})},a2aa:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n("d225"),i=n("b0b4"),a=function(){function t(){Object(o["a"])(this,t)}return Object(i["a"])(t,null,[{key:"copyFromText",value:function(t){var e=document.createElement("textarea");e.value=t,e.setAttribute("readonly",""),e.style.position="absolute",e.style.left="-9999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e)}},{key:"copyFromElement",value:function(t){var e=document.getElementById(t);if(e){var n=e.innerText,o=document.createElement("textarea");o.value=n,o.setAttribute("readonly",""),o.style.position="absolute",o.style.left="-9999px",document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o)}}}])}()},bd86:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var o=n("454f"),i=n.n(o),a=n("a6fa");function r(t,e,n){return(e=Object(a["a"])(e))in t?i()(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},d78b:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var o=n("d225"),i=n("b0b4"),a=function(){function t(){Object(o["a"])(this,t)}return Object(i["a"])(t,null,[{key:"expand",value:function(){if(this.collapsed){for(var t=["main-content","navbar","navbar-contents"],e=0,n=t;e<n.length;e++){var o=n[e],i=document.getElementsByClassName(o);i&&i[0]&&i[0].classList.remove("navbar-collapsed")}var a=document.getElementById("collapse-nav-chevron");a&&(a.style.display="none"),this.collapsed=!1}}},{key:"collapse",value:function(){if(!(window.innerWidth<768)){for(var t=["main-content","navbar","navbar-contents"],e=0,n=t;e<n.length;e++){var o=n[e],i=document.getElementsByClassName(o);i&&i[0]&&i[0].classList.add("navbar-collapsed")}var a=document.getElementById("collapse-nav-chevron");a&&(a.style.display="block"),this.collapsed=!0}}},{key:"toggleCollapse",value:function(){this.collapsed?this.expand():this.collapse()}}])}();a.collapsed=!1}}]);