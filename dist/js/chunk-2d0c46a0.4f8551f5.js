(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c46a0"],{"3b72":function(t,n,e){"use strict";e.r(n);var o=function(){var t=this,n=t._self._c;return n("div",[n("div",{staticClass:"row"},[n("div",{staticClass:"col-4"},[n("eq-window",[n("h1",{staticClass:"eq-header"},[t._v("Websocket Proof of Concept")]),n("div",{staticClass:"eq-alert"},[t._v("\n          We're gonna play with some websockets. We're going to see if we can real-time stream command output from the\n          backend to the frontend"),n("br"),n("br"),t._v("\n\n          The purpose of this will be to run pre-flight checks on the server to ensure that there are no errors before\n          doing a full launch."),n("br"),n("br"),t._v("\n\n          For example, do we need database updates? Did we miss an update? Was there an error on initial launch?\n          "),n("br"),n("br"),t._v("\n          We also will need websockets for real-time notifications between the server and Spire\n        ")]),n("div",{staticClass:"mt-3"},[n("button",{staticClass:"btn btn-dark btn-sm",on:{click:function(n){return t.runProcess("world")}}},[n("i",{staticClass:"fa fa-crosshairs"}),t._v("\n            Run World\n          ")]),n("button",{staticClass:"btn btn-dark btn-sm ml-3",on:{click:function(n){return t.runProcess("zone")}}},[n("i",{staticClass:"fa fa-crosshairs"}),t._v("\n            Run Zone\n          ")]),n("button",{staticClass:"btn btn-dark btn-sm ml-3",on:{click:function(n){return t.runProcess("loginserver")}}},[n("i",{staticClass:"fa fa-crosshairs"}),t._v("\n            Run Loginsever\n          ")]),n("button",{staticClass:"btn btn-dark btn-sm ml-3",on:{click:function(n){return t.runProcess("ucs")}}},[n("i",{staticClass:"fa fa-crosshairs"}),t._v("\n            Run UCS\n          ")])])])],1),n("div",{staticClass:"col-8"},[n("eq-window",{attrs:{title:"Output"}},[n("pre",{staticClass:"mt-3 fade-in",staticStyle:{width:"100%",height:"75vh","word-wrap":"break-word","white-space":"pre-wrap","overflow-x":"hidden"},attrs:{id:"output"},domProps:{innerHTML:t._s(t.output)}})])],1)])])},s=[],a=(e("3b2b"),e("935a")),i=e("ae45"),r=e("73bf"),c=e("61ab"),u=new c,l={name:"WebsocketPoc",components:{EqWindow:a["a"]},data:function(){return{outputContainer:null,ansiRegex:null}},created:function(){this.output=""},mounted:function(){var t=this;this.init(),setTimeout((function(){t.outputContainer=document.getElementById("output")}),1e3);var n=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-nq-uy=><~]))"].join("|");this.ansiRegex=new RegExp(n)},methods:{hello:function(){r["a"].connect().send(JSON.stringify({action:"hello"}))},exec:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];r["a"].connect().send(JSON.stringify({action:"exec_server_bin",command:t,args:n}))},runProcess:function(t){this.exec(t)},renderOutput:Object(i["debounce"])((function(){var t=this;this.$forceUpdate(),setTimeout((function(){t.outputContainer&&(t.outputContainer.scrollTop=t.outputContainer.scrollHeight+100)}),1)}),10),init:function(){var t=this;r["a"].connect().onmessage=function(n){t.ansiRegex.test(n.data)?t.output+=u.toHtml(n.data)+"\n":t.output+=n.data+"\n",t.outputContainer&&(t.outputContainer.scrollTop=t.outputContainer.scrollHeight),t.renderOutput()}}}},d=l,f=e("2877"),p=Object(f["a"])(d,o,s,!1,null,"4285404d",null);n["default"]=p.exports}}]);