(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a1e6fdd"],{"02f6":function(t,s,r){"use strict";var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"container-fluid content-area"},[s("div",{staticClass:"panel-body"},[s("div",{staticClass:"panel panel-default"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-12 mt-3"},[t._t("default")],2)])])])])},a=[],n={name:"ContentArea"},o=n,i=r("2877"),c=Object(i["a"])(o,e,a,!1,null,"4665fdac",null);s["a"]=c.exports},8806:function(t,s,r){"use strict";r.r(s);var e=function(){var t=this,s=t._self._c;return s("content-area",[s("create-user-modal",{on:{"reload-users":function(s){return t.listUsers()}}}),s("reset-user-password-modal",{attrs:{user:t.resetPasswordUser}}),s("div",{staticClass:"row justify-content-center"},[s("div",{staticClass:"col-12 col-lg-10 col-xl-8 content-pop card"},[s("div",{staticClass:"container-fluid"},[s("div",{staticClass:"row justify-content-between align-items-center mt-5"},[s("div",{staticClass:"col-12"},[s("h2",{staticClass:"mb-2"},[t._v("\n              Spire User Management\n            ")]),s("p",{staticClass:"text-muted mb-md-0"},[t._v("\n              Manage local database users\n            ")])])]),s("hr"),s("div",{staticClass:"alert alert-warning",attrs:{role:"alert"}},[s("i",{staticClass:"fa fa-info-circle mr-1"}),t._v(" After user creation, you will need to set the users permissions in the "),s("router-link",{attrs:{to:"/connections"}},[t._v("connections")]),t._v(" page. New users have no permissions by default.\n        ")],1),s("div",{staticClass:"mt-3"},[s("info-error-banner",{staticClass:"mt-3",attrs:{slim:!0,notification:t.notification,error:t.error},on:{"dismiss-error":function(s){t.error=""},"dismiss-notification":function(s){t.notification=""}}}),s("h3",{staticClass:"mt-3"},[t._v("\n            Local Users\n            "),s("a",{staticClass:"btn btn-sm btn-white btn-danger ml-3",on:{click:function(s){return t.createUser(t.user)}}},[s("i",{staticClass:"fa fa-plus"}),t._v("\n              Create New User\n            ")])]),s("b-list-group",{staticClass:"mt-3"},t._l(t.users,(function(r){return s("b-list-group-item",{key:r.id,staticClass:"d-flex align-items-center"},[s("b-avatar",{directives:[{name:"b-tooltip",rawName:"v-b-tooltip.hover.v-dark.top",modifiers:{hover:!0,"v-dark":!0,top:!0}}],staticClass:"mr-3",attrs:{src:r.avatar,size:"30",variant:"info",title:r.user_name}}),s("span",{staticClass:"mr-auto"},[t._v(t._s(r.user_name))]),s("a",{staticClass:"btn btn-sm btn-white mr-3",on:{click:function(s){return t.resetPassword(r)}}},[s("i",{staticClass:"fe fe-lock"}),t._v("\n                Reset Password\n              ")]),r.id!==t.user.id?s("a",{staticClass:"btn btn-sm btn-danger mr-3",on:{click:function(s){return t.deleteUser(r)}}},[s("i",{staticClass:"fa fa-trash"}),t._v("\n                Delete\n              ")]):t._e(),s("b-badge",[t._v(t._s(t.toTitleCase(r.provider)))])],1)})),1)],1)])])])],1)},a=[],n=(r("a481"),r("96cf"),r("3b8d")),o=r("02f6"),i=r("0d95"),c=function(){var t=this,s=t._self._c;return s("b-modal",{attrs:{id:"create-user-modal",centered:"",title:"Create Local Spire User",size:"lg"},on:{show:function(s){return t.init()}},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[s("div",{})]},proxy:!0}])},[s("div",[t._v("\n    Username\n    "),s("b-form-input",{attrs:{id:"username",name:"username",autocomplete:"off",placeholder:"Username"},model:{value:t.username,callback:function(s){t.username=s},expression:"username"}})],1),s("div",{staticClass:"mt-3"},[t._v("\n    Password\n    "),s("div",{staticClass:"input-group"},[s("b-form-input",{attrs:{type:t.showPassword?"text":"password",id:"password",name:"password",autocomplete:"off",placeholder:"Password"},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-dark",attrs:{type:"button"},on:{click:function(s){t.showPassword=!t.showPassword}}},[s("i",{staticClass:"fe fe-lock"}),t._v("\n          Show Password\n        ")])])],1)]),s("div",{staticClass:"mt-3"},[t._v("\n    Confirm Password\n    "),s("div",{staticClass:"input-group"},[s("b-form-input",{attrs:{type:t.showPassword?"text":"password",id:"password-confirm",name:"password",autocomplete:"off",placeholder:"Password"},model:{value:t.passwordConfirm,callback:function(s){t.passwordConfirm=s},expression:"passwordConfirm"}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-dark",attrs:{type:"button"},on:{click:function(s){t.showPassword=!t.showPassword}}},[s("i",{staticClass:"fe fe-lock"}),t._v("\n          Show Password\n        ")])])],1)]),s("b-button",{staticClass:"mt-5 btn-white form-control",on:{click:function(s){return t.createUser()}}},[s("i",{staticClass:"fa fa-plus"}),t._v(" Create User\n  ")]),s("info-error-banner",{staticClass:"mt-3",attrs:{slim:!0,notification:t.notification,error:t.error},on:{"dismiss-error":function(s){t.error=""},"dismiss-notification":function(s){t.notification=""}}})],1)},u=[],d=r("5afa"),l={name:"CreateUserModal",components:{InfoErrorBanner:d["a"]},data:function(){return{username:"",password:"",passwordConfirm:"",showPassword:!1,notification:"",error:""}},mounted:function(){this.init()},methods:{createUser:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var s,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.username.length){t.next=3;break}return this.error="Username is empty!",t.abrupt("return");case 3:if(0!==this.password.length){t.next=6;break}return this.error="Password is empty!",t.abrupt("return");case 6:if(0!==this.passwordConfirm.length){t.next=9;break}return this.error="Password confirmation is empty!",t.abrupt("return");case 9:if(this.password===this.passwordConfirm){t.next=12;break}return this.error="Passwords do not match!",t.abrupt("return");case 12:if(!(this.password.length<8)){t.next=15;break}return this.error="Password must be greater than 8 characters!",t.abrupt("return");case 15:return t.prev=15,t.next=18,i["SpireApi"].v1().put("user",{username:this.username,password:this.password});case 18:s=t.sent,200===s.status&&(this.notification="User created successfully!",this.$emit("reload-users",!0),setTimeout((function(){r.$bvModal.hide("create-user-modal")}),2e3)),t.next=25;break;case 22:t.prev=22,t.t0=t["catch"](15),t.t0.response&&t.t0.response.data&&t.t0.response.data.error&&(this.error=t.t0.response.data.error);case 25:case"end":return t.stop()}}),t,this,[[15,22]])})));function s(){return t.apply(this,arguments)}return s}(),init:function(){this.username="",this.password="",this.passwordConfirm="",this.showPassword=!1,this.notification="",this.error=""}}},p=l,f=r("2877"),w=Object(f["a"])(p,c,u,!1,null,"05606c28",null),m=w.exports,h=r("038a"),b=function(){var t=this,s=t._self._c;return s("b-modal",{attrs:{id:"reset-user-password-modal",centered:"",title:"Reset Password For User [".concat(t.user.user_name,"] (").concat(t.user.id,")"),size:"lg"},on:{show:function(s){return t.init()}},scopedSlots:t._u([{key:"modal-footer",fn:function(){return[s("div",{})]},proxy:!0}])},[s("div",{staticClass:"mt-3"},[t._v("\n    Password\n    "),s("div",{staticClass:"input-group"},[s("b-form-input",{attrs:{type:t.showPassword?"text":"password",id:"password",name:"password",autocomplete:"off",placeholder:"Password"},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-dark",attrs:{type:"button"},on:{click:function(s){t.showPassword=!t.showPassword}}},[s("i",{staticClass:"fe fe-lock"}),t._v("\n          Show Password\n        ")])])],1)]),s("div",{staticClass:"mt-3"},[t._v("\n    Confirm Password\n    "),s("div",{staticClass:"input-group"},[s("b-form-input",{attrs:{type:t.showPassword?"text":"password",id:"password-confirm",name:"password",autocomplete:"off",placeholder:"Password"},model:{value:t.passwordConfirm,callback:function(s){t.passwordConfirm=s},expression:"passwordConfirm"}}),s("div",{staticClass:"input-group-append"},[s("button",{staticClass:"btn btn-dark",attrs:{type:"button"},on:{click:function(s){t.showPassword=!t.showPassword}}},[s("i",{staticClass:"fe fe-lock"}),t._v("\n          Show Password\n        ")])])],1)]),s("b-button",{staticClass:"mt-5 btn-white form-control",on:{click:function(s){return t.resetPassword()}}},[s("i",{staticClass:"fe fe-lock"}),t._v(" Reset Password\n  ")]),s("info-error-banner",{staticClass:"mt-3",attrs:{slim:!0,notification:t.notification,error:t.error},on:{"dismiss-error":function(s){t.error=""},"dismiss-notification":function(s){t.notification=""}}})],1)},v=[],C={name:"ResetUserPasswordModal",components:{InfoErrorBanner:d["a"]},data:function(){return{password:"",passwordConfirm:"",showPassword:!1,notification:"",error:""}},props:{user:{type:Object}},mounted:function(){this.init()},methods:{resetPassword:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var s,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==this.password.length){t.next=3;break}return this.error="Password is empty!",t.abrupt("return");case 3:if(0!==this.passwordConfirm.length){t.next=6;break}return this.error="Password confirmation is empty!",t.abrupt("return");case 6:if(this.password===this.passwordConfirm){t.next=9;break}return this.error="Passwords do not match!",t.abrupt("return");case 9:if(!(this.password.length<8)){t.next=12;break}return this.error="Password must be greater than 8 characters!",t.abrupt("return");case 12:return t.prev=12,t.next=15,i["SpireApi"].v1().post("user/".concat(this.user.id,"/password-reset"),{password:this.password});case 15:s=t.sent,200===s.status&&(this.notification="User password reset successfully!",this.$emit("reload-users",!0),setTimeout((function(){r.$bvModal.hide("reset-user-password-modal")}),2e3)),t.next=22;break;case 19:t.prev=19,t.t0=t["catch"](12),t.t0.response&&t.t0.response.data&&t.t0.response.data.error&&(this.error=t.t0.response.data.error);case 22:case"end":return t.stop()}}),t,this,[[12,19]])})));function s(){return t.apply(this,arguments)}return s}(),init:function(){this.password="",this.passwordConfirm="",this.showPassword=!1,this.notification="",this.error=""}}},k=C,P=Object(f["a"])(k,b,v,!1,null,"28154966",null),g=P.exports,x={name:"UserManagement",components:{ResetUserPasswordModal:g,InfoErrorBanner:d["a"],CreateUserModal:m,ContentArea:o["a"]},data:function(){return{user:{},resetPasswordUser:{},users:[],notification:"",error:""}},methods:{resetPassword:function(t){this.resetPasswordUser=t,this.$bvModal.show("reset-user-password-modal")},createUser:function(){this.$bvModal.show("create-user-modal")},deleteUser:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(s){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!confirm("Are you sure you want to delete this user? \n\n[".concat(s.user_name,"] (").concat(s.id,")"))){t.next=11;break}return t.prev=1,t.next=4,i["SpireApi"].v1().delete("user/"+s.id);case 4:r=t.sent,200===r.status&&(this.notification="User deleted successfully",this.listUsers()),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),t.t0.response&&t.t0.response.data&&t.t0.response.data.error&&(this.error=t.t0.response.data.error);case 11:case"end":return t.stop()}}),t,this,[[1,8]])})));function s(s){return t.apply(this,arguments)}return s}(),toTitleCase:function(t){return t.replace(/\w\S*/g,(function(t){return t.charAt(0).toUpperCase()+t.substr(1).toLowerCase()}))},listUsers:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){var s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["SpireApi"].v1().get("users");case 2:s=t.sent,200===s.status&&(this.users=s.data.filter((function(t){return"local"===t.provider})));case 4:case"end":return t.stop()}}),t,this)})));function s(){return t.apply(this,arguments)}return s}()},mounted:function(){var t=Object(n["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h["a"].getUser();case 2:this.user=t.sent,this.listUsers();case 4:case"end":return t.stop()}}),t,this)})));function s(){return t.apply(this,arguments)}return s}()},_=x,y=Object(f["a"])(_,e,a,!1,null,"3036788b",null);s["default"]=y.exports}}]);