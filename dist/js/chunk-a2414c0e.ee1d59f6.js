(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a2414c0e"],{"1ce7":function(e,t,r){"use strict";r("a802")},a802:function(e,t,r){},cc49:function(e,t,r){"use strict";r.r(t);r("386d");var a=function(){var e=this,t=e._self._c;return t("eq-window",[t("div",{staticClass:"row justify-content-center",staticStyle:{position:"absolute",top:"0%","z-index":"9999999",width:"100%"}},[t("div",{staticClass:"col-6"},[t("info-error-banner",{staticClass:"mt-3",staticStyle:{width:"100%"},attrs:{slim:!0,notification:e.notification,error:e.error},on:{"dismiss-error":function(t){e.error=""},"dismiss-notification":function(t){e.notification=""}}})],1)]),t("div",{staticStyle:{"max-height":"86vh","overflow-y":"scroll","overflow-x":"hidden"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-11"},[t("b-form-input",{staticClass:"form-control list-search",attrs:{type:"text",autofocus:"",placeholder:"Search rules..."},on:{keyup:function(t){return e.updateQueryState()}},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),t("div",{staticClass:"col-1"},[t("button",{staticClass:"btn m-0",attrs:{title:"Reset"},on:{click:function(t){e.search="",e.updateQueryState()}}},[t("i",{staticClass:"fa fa-refresh"}),e._v(" Reset\n        ")])])]),t("table",{staticClass:"eq-table eq-highlight-rows bordered log-settings mt-3"},[t("thead",{staticClass:"eq-table-floating-header"},[t("tr",[t("th",{staticStyle:{width:"60px"},attrs:{tabindex:"0"}},[e._v("RID")]),t("th",{staticStyle:{width:"320px !important"},attrs:{tabindex:"0"}},[e._v("Rule Name")]),t("th",{staticClass:"text-center",staticStyle:{width:"250px"},attrs:{tabindex:"0"}},[e._v("Value")]),t("th",{attrs:{tabindex:"0"}},[e._v("Description")])])]),t("tbody",e._l(e.filteredRules,(function(r,a){return t("tr",{key:a},[t("td",{staticStyle:{"text-align":"center"}},[e._v(e._s(r.ruleset_id))]),t("td",[e._v(e._s(r.rule_name))]),t("td",{staticClass:"text-center"},["true"===r.rule_value||"false"===r.rule_value?t("label",{staticClass:"mb-0"},[t("eq-checkbox",{staticClass:"d-inline-block mt-2",attrs:{"fade-when-not-true":!0,"true-value":"true","false-value":"false"},on:{change:function(t){return e.updateRule(r)}},model:{value:r.rule_value,callback:function(t){e.$set(r,"rule_value",t)},expression:"rule.rule_value"}})],1):e._e(),"true"!==r.rule_value&&"false"!==r.rule_value?t("span",[t("input",{directives:[{name:"model",rawName:"v-model",value:r.rule_value,expression:"rule.rule_value"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:r.rule_value},on:{change:function(t){return e.updateRule(r)},input:function(t){t.target.composing||e.$set(r,"rule_value",t.target.value)}}})]):e._e()]),t("td",{staticStyle:{overflow:"auto","white-space":"normal"}},[e._v("\n          "+e._s(r.notes)+"\n        ")])])})),0)])])])},s=[],n=(r("6762"),r("2fdb"),r("ac6a"),r("9a04")),i=r("75fc"),u=(r("96cf"),r("3b8d")),l=r("80b0"),o=r("935a"),c=r("46f9"),h=r("0d95"),d=r("cc07"),f=r("5afa"),p=r("e40e"),v={components:{InfoErrorBanner:f["a"],EqCheckbox:c["a"],EqWindow:o["a"]},data:function(){return{search:"",rules:[],filteredRules:[],loaded:!1,notification:"",error:""}},watch:{$route:function(){this.loadQueryState(),this.filterRules()}},created:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.loadRules();case 2:this.filterRules(),this.loaded=!0,this.loadQueryState(),this.filterRules();case 6:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{loadRules:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(n["a"])(d["a"],Object(i["a"])(h["SpireApi"].cfg())).listRuleValues({limit:1e4});case 2:t=e.sent,200===t.status&&(this.rules=t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateQueryState:function(){var e={};""!==this.search&&(e.search=this.search),this.$router.push({path:l["a"].ADMIN_CONFIG_SERVER_RULES,query:e}).catch((function(){}))},loadQueryState:function(){this.$route.query.search&&this.$route.query.search.length>0&&(this.search=this.$route.query.search)},updateRule:function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var r,a,s=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(n["a"])(d["a"],Object(i["a"])(h["SpireApi"].cfg())).updateRuleValue({id:t.ruleset_id,ruleValue:t},{query:(new p["a"]).where("ruleset_id","=",t.ruleset_id).where("rule_name","=",t.rule_name).get()});case 3:if(r=e.sent,200!==r.status){e.next=11;break}return this.notification="Updated rule (".concat(t.ruleset_id,") [").concat(t.rule_name,"] to value (").concat(t.rule_value,")!"),this.loadRules(),e.next=9,h["SpireApi"].v1().post("eqemuserver/reload/rules");case 9:a=e.sent,200===a.status&&setTimeout((function(){s.notification="Server rules reloaded in-game!"}),1e3);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),e.t0.response&&e.t0.response.data&&e.t0.response.data.error&&(this.error=e.t0.response.data.error);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(t){return e.apply(this,arguments)}return t}(),filterRules:function(){var e=this;if(this.search){var t=[];this.rules.forEach((function(r){(r.rule_name.toLowerCase().includes(e.search.toLowerCase())||r.notes.toLowerCase().includes(e.search.toLowerCase()))&&t.push(r)})),this.filteredRules=t}else this.filteredRules=this.rules}}},m=v,_=(r("1ce7"),r("2877")),w=Object(_["a"])(m,a,s,!1,null,null,null);t["default"]=w.exports}}]);