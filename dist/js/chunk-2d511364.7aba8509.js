(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d511364"],{"02f6":function(t,e,a){"use strict";var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid content-area"},[e("div",{staticClass:"panel-body"},[e("div",{staticClass:"panel panel-default"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 mt-3"},[t._t("default")],2)])])])])},n=[],i={name:"ContentArea"},s=i,o=a("2877"),c=Object(o["a"])(s,r,n,!1,null,"4665fdac",null);e["a"]=c.exports},"1af6":function(t,e,a){var r=a("63b6");r(r.S,"Array",{isArray:a("9003")})},"20fd":function(t,e,a){"use strict";var r=a("d9f6"),n=a("aebd");t.exports=function(t,e,a){e in t?r.f(t,e,n(0,a)):t[e]=a}},"2f9c":function(t,e,a){"use strict";a.d(e,"b",(function(){return d})),a.d(e,"a",(function(){return f}));for(var r=a("768b"),n=(a("ac6a"),a("ffc1"),{55:"fishing",56:"make-poison",57:"tinkering",58:"research",59:"alchemy",60:"baking",61:"tailoring",63:"blacksmithing",64:"fletching",65:"brewing",68:"jewelry-making",69:"pottery",75:"quest-combines"}),i={},s=0,o=Object.entries(n);s<o.length;s++){var c=Object(r["a"])(o[s],2),l=c[0],u=c[1];i[u]=parseInt(l)}function d(t){return n[t]||String(t)}function f(t){if(void 0!==i[t])return i[t];var e=parseInt(t);return isNaN(e)?0:e}},"43ab":function(t,e,a){"use strict";a("6002")},"504c":function(t,e,a){var r=a("9e1e"),n=a("0d58"),i=a("6821"),s=a("52a7").f;t.exports=function(t){return function(e){var a,o=i(e),c=n(o),l=c.length,u=0,d=[];while(l>u)a=c[u++],r&&!s.call(o,a)||d.push(t?[a,o[a]]:o[a]);return d}}},"549b":function(t,e,a){"use strict";var r=a("d864"),n=a("63b6"),i=a("241e"),s=a("b0dc"),o=a("3702"),c=a("b447"),l=a("20fd"),u=a("7cd6");n(n.S+n.F*!a("4ee1")((function(t){Array.from(t)})),"Array",{from:function(t){var e,a,n,d,f=i(t),p="function"==typeof this?this:Array,h=arguments.length,v=h>1?arguments[1]:void 0,g=void 0!==v,m=0,b=u(f);if(g&&(v=r(v,h>2?arguments[2]:void 0,2)),void 0==b||p==Array&&o(b))for(e=c(f.length),a=new p(e);e>m;m++)l(a,m,g?v(f[m],m):f[m]);else for(d=b.call(f),a=new p;!(n=d.next()).done;m++)l(a,m,g?s(d,v,[n.value,m],!0):n.value);return a.length=m,a}})},6002:function(t,e,a){},"6ec4":function(t,e,a){"use strict";a.r(e);a("7f7f"),a("386d");var r=function(){var t=this,e=t._self._c;return e("content-area",[e("eq-window",{attrs:{title:t.tradeskillName+" Recipes"}},[e("div",{staticClass:"row mb-3"},[e("div",{staticClass:"col-auto d-flex align-items-center pr-0"},[e("b-button",{attrs:{size:"sm",variant:"outline-secondary",title:"Back to Tradeskills"},on:{click:function(e){return t.goBack()}}},[e("i",{staticClass:"fa fa-arrow-left"}),t._v(" Back\n        ")])],1),e("div",{staticClass:"col-lg-4"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Search recipes by name...",autofocus:""},domProps:{value:t.search},on:{keyup:function(e){if(!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.page=1,t.loadRecipes()},input:function(e){e.target.composing||(t.search=e.target.value)}}})]),e("div",{staticClass:"col-lg-2"},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.maxTrivial,expression:"maxTrivial",modifiers:{number:!0}}],staticClass:"form-control",attrs:{type:"number",placeholder:"Max Trivial"},domProps:{value:t.maxTrivial},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loadRecipes()},input:function(e){e.target.composing||(t.maxTrivial=t._n(e.target.value))},blur:function(e){return t.$forceUpdate()}}})]),e("div",{staticClass:"col-lg-2"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.sortField,expression:"sortField"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortField=e.target.multiple?a:a[0]},function(e){return t.loadRecipes()}]}},[e("option",{attrs:{value:"name"}},[t._v("Sort: Name")]),e("option",{attrs:{value:"trivial"}},[t._v("Sort: Trivial")]),e("option",{attrs:{value:"skillneeded"}},[t._v("Sort: Skill Needed")]),e("option",{attrs:{value:"id"}},[t._v("Sort: ID")])])]),e("div",{staticClass:"col-lg-1"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.sortDir,expression:"sortDir"}],staticClass:"form-control",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.sortDir=e.target.multiple?a:a[0]},function(e){return t.loadRecipes()}]}},[e("option",{attrs:{value:"asc"}},[t._v("Asc")]),e("option",{attrs:{value:"desc"}},[t._v("Desc")])])]),e("div",{staticClass:"col-lg-1"},[e("select",{directives:[{name:"model",rawName:"v-model.number",value:t.pageSize,expression:"pageSize",modifiers:{number:!0}}],staticClass:"form-control",attrs:{title:"Rows per page"},on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(e){var a="_value"in e?e._value:e.value;return t._n(a)}));t.pageSize=e.target.multiple?a:a[0]},function(e){return t.onPageSizeChange()}]}},[e("option",{domProps:{value:25}},[t._v("25")]),e("option",{domProps:{value:50}},[t._v("50")]),e("option",{domProps:{value:100}},[t._v("100")])])]),e("div",{staticClass:"col text-right"},[e("div",{staticClass:"btn-group"},[e("b-button",{attrs:{size:"sm",variant:"outline-danger",title:"Reset"},on:{click:function(e){return t.resetSearch()}}},[e("i",{staticClass:"fa fa-eraser"}),t._v(" Reset\n          ")]),e("b-button",{attrs:{size:"sm",variant:"outline-success",title:"New Recipe"},on:{click:function(e){return t.createRecipe()}}},[e("i",{staticClass:"fa fa-plus"}),t._v(" New Recipe\n          ")])],1)])]),t.loading?e("div",{staticClass:"text-center p-5"},[e("loader-fake-progress")],1):t._e(),t.loading||0!==t.recipes.length?t._e():e("div",{staticClass:"text-center p-5 text-muted"},[t._v("\n      No recipes found.\n    ")]),!t.loading&&t.recipes.length>0?e("div",{staticClass:"tradeskill-table-wrap",staticStyle:{"overflow-y":"auto","max-height":"78vh"}},[e("table",{staticClass:"eq-table bordered eq-highlight-rows tradeskill-table",staticStyle:{"font-size":"14px"}},[e("thead",{staticClass:"eq-table-floating-header"},[e("tr",[e("th",{staticStyle:{width:"60px"}},[t._v("ID")]),e("th",[t._v("Name")]),e("th",{staticClass:"text-center",staticStyle:{width:"80px"}},[t._v("Trivial")]),e("th",{staticClass:"text-center",staticStyle:{width:"100px"}},[t._v("Skill Needed")]),e("th",{staticClass:"text-center",staticStyle:{width:"80px"}},[t._v("No Fail")]),e("th",{staticClass:"text-center",staticStyle:{width:"80px"}},[t._v("Quest")]),e("th",{staticClass:"text-center",staticStyle:{width:"80px"}},[t._v("Enabled")]),e("th",{staticClass:"text-center",staticStyle:{width:"100px"}},[t._v("Components")]),e("th",{staticClass:"text-center",staticStyle:{width:"120px"}},[t._v("Actions")])])]),e("tbody",t._l(t.recipes,(function(a){return e("tr",{key:a.id,staticClass:"cursor-pointer",on:{click:function(e){return t.editRecipe(a)}}},[e("td",[t._v(t._s(a.id))]),e("td",[e("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.name))]),a.must_learn?e("span",{staticClass:"badge badge-info ml-1",staticStyle:{"font-size":"10px"}},[t._v("Must Learn")]):t._e()]),e("td",{staticClass:"text-center"},[t._v(t._s(a.trivial))]),e("td",{staticClass:"text-center"},[t._v(t._s(a.skillneeded))]),e("td",{staticClass:"text-center"},[e("i",{class:a.nofail?"fa fa-check text-success":"fa fa-times text-muted"})]),e("td",{staticClass:"text-center"},[e("i",{class:a.quest?"fa fa-check text-warning":"fa fa-times text-muted"})]),e("td",{staticClass:"text-center"},[e("i",{class:a.enabled?"fa fa-check text-success":"fa fa-times text-danger"})]),e("td",{staticClass:"text-center"},[void 0!==a.entryCount?e("span",[t._v(t._s(a.entryCount))]):e("i",{staticClass:"fa fa-spinner fa-spin text-muted"})]),e("td",{staticClass:"text-center",on:{click:function(t){t.stopPropagation()}}},[e("b-button",{attrs:{size:"sm",variant:"outline-warning",title:"Edit"},on:{click:function(e){return t.editRecipe(a)}}},[e("i",{staticClass:"fa fa-pencil"})]),e("b-button",{staticClass:"ml-1",attrs:{size:"sm",variant:"outline-danger",title:"Delete"},on:{click:function(e){return t.confirmDelete(a)}}},[e("i",{staticClass:"fa fa-trash"})])],1)])})),0)])]):t._e(),!t.loading&&t.totalCount>0?e("div",{staticClass:"text-center mt-3"},[e("div",{staticClass:"btn-group"},[e("b-button",{attrs:{size:"sm",variant:"outline-secondary",disabled:t.page<=1},on:{click:function(e){t.page>1&&t.changePage(t.page-1)}}},[e("i",{staticClass:"fa fa-chevron-left"})]),t._l(t.visiblePages,(function(a){return e("b-button",{key:a,attrs:{size:"sm",variant:a===t.page?"warning":"outline-secondary"},on:{click:function(e){return t.changePage(a)}}},[t._v("\n          "+t._s(a)+"\n        ")])})),e("b-button",{attrs:{size:"sm",variant:"outline-secondary",disabled:t.page>=t.totalPages},on:{click:function(e){t.page<t.totalPages&&t.changePage(t.page+1)}}},[e("i",{staticClass:"fa fa-chevron-right"})])],2),e("div",{staticClass:"text-muted mt-1",staticStyle:{"font-size":"12px"}},[t._v("\n        Page "+t._s(t.page)+" of "+t._s(t.totalPages)+" ("+t._s(t.totalCount.toLocaleString())+" recipes)\n      ")])]):t._e()]),e("b-modal",{ref:"deleteModal",attrs:{title:"Delete Recipe","ok-variant":"danger","ok-title":"Delete"},on:{ok:function(e){return t.deleteRecipe()}}},[e("p",[t._v("Are you sure you want to delete recipe "),e("strong",[t._v(t._s(t.deleteTarget?t.deleteTarget.name:""))]),t._v(" (ID: "+t._s(t.deleteTarget?t.deleteTarget.id:"")+")?")]),e("p",{staticClass:"text-danger"},[t._v("This action cannot be undone.")])])],1)},n=[],i=(a("ac4d"),a("8a81"),a("5df3"),a("1c4c"),a("6b54"),a("8e6e"),a("ac6a"),a("456d"),a("bd86")),s=a("7618"),o=(a("96cf"),a("3b8d")),c=(a("80b0"),a("0d95")),l=a("2f9c"),u=a("02f6"),d=a("935a");function f(t,e){var a="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!a){if(Array.isArray(t)||(a=p(t))||e&&t&&"number"==typeof t.length){a&&(t=a);var r=0,n=function(){};return{s:n,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,o=!1;return{s:function(){a=a.call(t)},n:function(){var t=a.next();return s=t.done,t},e:function(t){o=!0,i=t},f:function(){try{s||null==a.return||a.return()}finally{if(o)throw i}}}}function p(t,e){if(t){if("string"==typeof t)return h(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?h(t,e):void 0}}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=Array(e);a<e;a++)r[a]=t[a];return r}function v(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function g(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?v(Object(a),!0).forEach((function(e){Object(i["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):v(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var m={55:"Fishing",56:"Make Poison",57:"Tinkering",58:"Research",59:"Alchemy",60:"Baking",61:"Tailoring",63:"Blacksmithing",64:"Fletching",65:"Brewing",68:"Jewelry Making",69:"Pottery",75:"Quest Combines"},b=50,y={name:"Tradeskills",components:{"content-area":u["a"],"eq-window":d["a"]},data:function(){return{tradeskillId:0,recipes:[],loading:!1,search:"",maxTrivial:null,sortField:"name",sortDir:"asc",page:1,pageSize:b,totalCount:0,deleteTarget:null}},computed:{tradeskillName:function(){return m[this.tradeskillId]||"Unknown"},totalPages:function(){return Math.max(1,Math.ceil(this.totalCount/this.pageSize))},visiblePages:function(){for(var t=[],e=Math.max(1,this.page-3),a=Math.min(this.totalPages,this.page+3),r=e;r<=a;r++)t.push(r);return t}},watch:{"$route.params.tradeskillId":{handler:function(t){this.tradeskillId=Object(l["a"])(t),this.page=1,this.loadRecipes()}}},created:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.tradeskillId=Object(l["a"])(this.$route.params.tradeskillId),t.next=3,this.loadRecipes();case 3:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{loadRecipes:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.prev=1,e=c["SpireApi"].v1(),a=["tradeskill__"+this.tradeskillId],this.search&&a.push("name_like_"+this.search),this.maxTrivial&&a.push("trivial__lte__"+this.maxTrivial),r=a.join("."),t.prev=7,t.next=10,e.get("tradeskill_recipes/count",{params:{where:r}});case 10:n=t.sent,n.data&&(Array.isArray(n.data)?this.totalCount=n.data[0]&&n.data[0].count||0:"object"===Object(s["a"])(n.data)&&null!=n.data.count?this.totalCount=n.data.count:"number"===typeof n.data&&(this.totalCount=n.data)),t.next=17;break;case 14:t.prev=14,t.t0=t["catch"](7),this.totalCount=0;case 17:return t.next=19,e.get("tradeskill_recipes",{params:{where:r,limit:this.pageSize,page:this.page-1,orderBy:this.sortField,orderDirection:this.sortDir}});case 19:if(i=t.sent,this.recipes=(i.data||[]).map((function(t){return g(g({},t),{},{entryCount:void 0})})),!(0===this.recipes.length&&this.page>1&&this.totalCount>0)){t.next=25;break}return this.page=this.totalPages,this.loading=!1,t.abrupt("return",this.loadRecipes());case 25:this.loading=!1,this.loadEntryCounts(),t.next=33;break;case 29:t.prev=29,t.t1=t["catch"](1),console.error("Failed to load recipes:",t.t1),this.loading=!1;case 33:case"end":return t.stop()}}),t,this,[[1,29],[7,14]])})));function e(){return t.apply(this,arguments)}return e}(),loadEntryCounts:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,r,n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=c["SpireApi"].v1(),a=f(this.recipes),t.prev=2,a.s();case 4:if((r=a.n()).done){t.next=18;break}return n=r.value,t.prev=6,t.next=9,e.get("tradeskill_recipe_entries",{params:{where:"recipe_id__".concat(n.id),select:"id",limit:1e3}});case 9:i=t.sent,this.$set(n,"entryCount",i.data?i.data.length:0),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](6),this.$set(n,"entryCount",0);case 16:t.next=4;break;case 18:t.next=23;break;case 20:t.prev=20,t.t1=t["catch"](2),a.e(t.t1);case 23:return t.prev=23,a.f(),t.finish(23);case 26:case"end":return t.stop()}}),t,this,[[2,20,23,26],[6,13]])})));function e(){return t.apply(this,arguments)}return e}(),changePage:function(t){this.page=t,this.loadRecipes()},onPageSizeChange:function(){this.page=1,this.loadRecipes()},resetSearch:function(){this.search="",this.maxTrivial=null,this.sortField="name",this.sortDir="asc",this.page=1,this.loadRecipes()},editRecipe:function(t){this.$router.push({path:"/tradeskills/".concat(Object(l["b"])(this.tradeskillId),"/recipe/").concat(t.id)})},createRecipe:function(){this.$router.push({path:"/tradeskills/".concat(Object(l["b"])(this.tradeskillId),"/recipe/new")})},confirmDelete:function(t){this.deleteTarget=t,this.$refs.deleteModal.show()},deleteRecipe:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(this.deleteTarget){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,e=c["SpireApi"].v1(),t.next=6,e.delete("tradeskill_recipe/".concat(this.deleteTarget.id));case 6:this.recipes=this.recipes.filter((function(t){return t.id!==a.deleteTarget.id})),this.totalCount--,this.deleteTarget=null,t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),console.error("Delete failed:",t.t0);case 14:case"end":return t.stop()}}),t,this,[[2,11]])})));function e(){return t.apply(this,arguments)}return e}(),goBack:function(){this.$router.push({path:"/tradeskills"})}}},k=y,x=(a("43ab"),a("2877")),_=Object(x["a"])(k,r,n,!1,null,null,null);e["default"]=_.exports},"768b":function(t,e,a){"use strict";a.d(e,"a",(function(){return p}));var r=a("f410"),n=a.n(r);function i(t){if(n()(t))return t}var s=a("f921"),o=a.n(s),c=a("d8d6"),l=a.n(c);function u(t,e){var a=null==t?null:"undefined"!=typeof o.a&&t[l.a]||t["@@iterator"];if(null!=a){var r,n,i,s,c=[],u=!0,d=!1;try{if(i=(a=a.call(t)).next,0===e){if(Object(a)!==a)return;u=!1}else for(;!(u=(r=i.call(a)).done)&&(c.push(r.value),c.length!==e);u=!0);}catch(t){d=!0,n=t}finally{try{if(!u&&null!=a["return"]&&(s=a["return"](),Object(s)!==s))return}finally{if(d)throw n}}return c}}var d=a("e630");function f(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t,e){return i(t)||u(t,e)||Object(d["a"])(t,e)||f()}},"8e6e":function(t,e,a){var r=a("5ca1"),n=a("990b"),i=a("6821"),s=a("11e9"),o=a("f1ae");r(r.S,"Object",{getOwnPropertyDescriptors:function(t){var e,a,r=i(t),c=s.f,l=n(r),u={},d=0;while(l.length>d)a=c(r,e=l[d++]),void 0!==a&&o(u,e,a);return u}})},"990b":function(t,e,a){var r=a("9093"),n=a("2621"),i=a("cb7c"),s=a("7726").Reflect;t.exports=s&&s.ownKeys||function(t){var e=r.f(i(t)),a=n.f;return a?e.concat(a(t)):e}},bd86:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var r=a("454f"),n=a.n(r),i=a("a6fa");function s(t,e,a){return(e=Object(i["a"])(e))in t?n()(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}},d2d5:function(t,e,a){a("1654"),a("549b"),t.exports=a("584a").Array.from},db2a:function(t,e,a){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,r=Array(e);a<e;a++)r[a]=t[a];return r}a.d(e,"a",(function(){return r}))},e630:function(t,e,a){"use strict";a.d(e,"a",(function(){return s}));var r=a("d2d5"),n=a.n(r),i=a("db2a");function s(t,e){if(t){if("string"==typeof t)return Object(i["a"])(t,e);var a={}.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?n()(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(i["a"])(t,e):void 0}}},f410:function(t,e,a){a("1af6"),t.exports=a("584a").Array.isArray},ffc1:function(t,e,a){var r=a("5ca1"),n=a("504c")(!0);r(r.S,"Object",{entries:function(t){return n(t)}})}}]);