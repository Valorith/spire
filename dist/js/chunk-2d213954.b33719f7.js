(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d213954"],{acfb:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"row justify-content-center",staticStyle:{position:"absolute",top:"10%","z-index":"9999999",width:"100%"}},[t("div",{staticClass:"col-6"},[t("info-error-banner",{staticClass:"mt-3",staticStyle:{width:"100%"},attrs:{slim:!0,notification:e.notification,error:e.error},on:{"dismiss-error":function(t){e.error=""},"dismiss-notification":function(t){e.notification=""}}})],1)]),e.configExists()?t("eq-window",{attrs:{title:"Quest Hot Reload Settings"}},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-3 text-right mt-3"},[t("eq-checkbox",{staticClass:"d-inline-block",attrs:{label:"Quest Hot Reloading","true-value":!0,"false-value":!1},on:{input:e.toggleHRM},model:{value:e.config["web-admin"].quests.hotReload,callback:function(t){e.$set(e.config["web-admin"].quests,"hotReload",t)},expression:"config['web-admin'].quests.hotReload"}})],1),t("div",{staticClass:"col-9"},[t("small",{staticClass:"text-muted"},[e._v("\n          This enables Quest Hot reloading within Spire.\n        ")]),t("div",{staticClass:"mt-3"},[e._v("\n          When you make changes to your quest files, Spire will immediately signal your game server to reload the\n          appropriate zone's quests for you to help speed up development feedback loops\n        ")])])])]):e._e(),e.configExists()?t("eq-window",{staticClass:"mt-5",attrs:{title:"Hot Reload Rule Settings"}},[t("table",{staticClass:"eq-table eq-highlight-rows bordered log-settings mt-3"},[t("thead",{staticClass:"eq-table-floating-header"},[t("tr",[t("th",{staticStyle:{width:"60px"},attrs:{tabindex:"0"}},[e._v("RID")]),t("th",{staticStyle:{width:"320px !important"},attrs:{tabindex:"0"}},[e._v("Rule Name")]),t("th",{staticClass:"text-center",staticStyle:{width:"250px"},attrs:{tabindex:"0"}},[e._v("Value")]),t("th",{attrs:{tabindex:"0"}},[e._v("Description")])])]),t("tbody",e._l(e.rules,(function(a,n){return t("tr",{key:n},[t("td",{staticStyle:{"text-align":"center"}},[e._v(e._s(a.ruleset_id))]),t("td",[e._v(e._s(a.rule_name))]),t("td",{staticClass:"text-center"},["true"===a.rule_value||"false"===a.rule_value?t("label",[t("eq-checkbox",{staticClass:"d-inline-block mt-2",attrs:{"fade-when-not-true":!0,"true-value":"true","false-value":"false"},on:{change:function(t){return e.updateRule(a)}},model:{value:a.rule_value,callback:function(t){e.$set(a,"rule_value",t)},expression:"rule.rule_value"}})],1):e._e(),"true"!==a.rule_value&&"false"!==a.rule_value?t("span",[t("input",{directives:[{name:"model",rawName:"v-model",value:a.rule_value,expression:"rule.rule_value"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:a.rule_value},on:{change:function(t){return e.updateRule(a)},input:function(t){t.target.composing||e.$set(a,"rule_value",t.target.value)}}})]):e._e()]),t("td",{staticStyle:{overflow:"auto","white-space":"normal"}},[e._v("\n          "+e._s(a.notes)+"\n        ")])])})),0)])]):e._e()],1)},r=[],s=a("9a04"),i=a("75fc"),o=(a("ac6a"),a("456d"),a("96cf"),a("3b8d")),u=a("935a"),l=a("0d95"),c=a("46f9"),d=a("cc07"),p=a("e40e"),f=a("5afa"),h={name:"QuestHotReload",components:{InfoErrorBanner:f["a"],EqCheckbox:c["a"],EqWindow:u["a"]},data:function(){return{config:{},rules:[],notification:"",error:""}},created:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.loadRules(),this.loadConfig();case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{configExists:function(){return this.config&&Object.keys(this.config).length>0&&this.config["web-admin"]&&this.config["web-admin"].quests&&"undefined"!==typeof this.config["web-admin"].quests.hotReload},toggleHRM:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l["SpireApi"].v1().post("admin/serverconfig",this.config);case 3:t=e.sent,200===t.status&&(this.config=t.data,this.notification="Server configuration updated with hot reload settings!"),e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](0),e.t0.response&&e.t0.response.data&&e.t0.response.data.error&&(this.error=e.t0.response.data.error);case 10:case"end":return e.stop()}}),e,this,[[0,7]])})));function t(){return e.apply(this,arguments)}return t}(),loadConfig:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,l["SpireApi"].v1().get("admin/serverconfig");case 2:t=e.sent,200===t.status&&(this.config=t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),loadRules:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(s["a"])(d["a"],Object(i["a"])(l["SpireApi"].cfg())).listRuleValues((new p["a"]).where("rule_name","like","HotReload").get());case 2:t=e.sent,200===t.status&&(this.rules=t.data);case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updateRule:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,n,r=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(s["a"])(d["a"],Object(i["a"])(l["SpireApi"].cfg())).updateRuleValue({id:t.ruleset_id,ruleValue:t},{query:(new p["a"]).where("ruleset_id","=",t.ruleset_id).where("rule_name","=",t.rule_name).get()});case 3:if(a=e.sent,200!==a.status){e.next=11;break}return this.notification="Updated rule (".concat(t.ruleset_id,") [").concat(t.rule_name,"] to value (").concat(t.rule_value,")!"),this.loadRules(),e.next=9,l["SpireApi"].v1().post("eqemuserver/reload/rules");case 9:n=e.sent,200===n.status&&setTimeout((function(){r.notification="Server rules reloaded in-game!"}),1e3);case 11:e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](0),e.t0.response&&e.t0.response.data&&e.t0.response.data.error&&(this.error=e.t0.response.data.error);case 16:case"end":return e.stop()}}),e,this,[[0,13]])})));function t(t){return e.apply(this,arguments)}return t}()}},v=h,m=a("2877"),g=Object(m["a"])(v,n,r,!1,null,"4109e3fe",null);t["default"]=g.exports}}]);