(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d39e6"],{"5e11":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("div",[e("eq-window",{attrs:{title:"Manual Backups"}},[e("div",{staticClass:"row justify-content-center",staticStyle:{position:"absolute",top:"0%","z-index":"9999999",width:"100%"}},[e("div",{staticClass:"col-4"},[e("info-error-banner",{staticClass:"mt-3",staticStyle:{width:"100%"},attrs:{slim:!0,notification:t.notification,error:t.error},on:{"dismiss-error":function(e){t.error=""},"dismiss-notification":function(e){t.notification=""}}})],1)]),e("table",{staticClass:"eq-table eq-highlight-rows bordered log-settings minified-inputs mt-3"},[e("thead",{staticClass:"eq-table-floating-header"},[e("tr",[e("th",{staticClass:"text-center",staticStyle:{width:"120px"}},[t._v("Asset")]),e("th",{},[t._v("Description")])])]),e("tbody",t._l(t.backups,(function(a){return e("tr",{key:a.path},[e("td",{staticClass:"text-center pr-3 pt-3 pb-3"},[e("a",{staticClass:"eq-button d-block",attrs:{target:a.path},on:{click:function(e){return t.download(a)}}},[t._v(t._s(a.asset))])]),e("td",[e("span",{staticClass:"font-weight-bold"},[t._v(t._s(a.description))])])])})),0)]),t.downloading?e("div",{staticClass:"mt-3"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-1 text-left"},[e("span",[t._v("Downloading...")]),e("loader-fake-progress",{staticClass:"mt-3"})],1)])]):t._e()])],1)},s=[],r=(a("28a5"),a("96cf"),a("3b8d")),o=a("935a"),i=a("bc3a"),c=a.n(i),d=a("0d95"),l=a("cc79"),p=a("5afa"),u={name:"Backups",components:{InfoErrorBanner:p["a"],LoaderFakeProgress:l["a"],EqWindow:o["a"]},data:function(){return{backups:[{asset:"Quests",description:"Downloads a compressed .zip of your Quests directory",path:d["SpireApi"].getBaseV1Path()+"/eqemuserver/manual-backup/quests"},{asset:"Maps",description:"Downloads a compressed .zip of your Maps directory",path:d["SpireApi"].getBaseV1Path()+"/eqemuserver/manual-backup/maps"}],downloading:!1,notification:"",error:""}},methods:{download:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getFile(e.path);case 3:t.next=8;break;case 5:t.prev=5,t.t0=t["catch"](0),t.t0.response&&t.t0.response.data&&t.t0.response.data.error&&(this.error=t.t0.response.data.error);case 8:case"end":return t.stop()}}),t,this,[[0,5]])})));function e(e){return t.apply(this,arguments)}return e}(),getFile:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(e){var a,n=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.downloading=!0,a=d["SpireApi"].getAxiosConfig(),a.responseType="blob",c.a.create(a).get(e,{onDownloadProgress:function(t){console.log(t),n.downloadPercent=Math.round(100*t.loaded/t.total)}}).then((function(t){var e=URL.createObjectURL(t.data),a=t.headers["content-disposition"].split("filename=")[1].replaceAll('"',""),s=document.createElement("a");s.href=e,s.setAttribute("download",a),document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(e),n.downloading=!1,n.notification="File downloaded!"}));case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}},f=u,h=a("2877"),w=Object(h["a"])(f,n,s,!1,null,"35266aff",null);e["default"]=w.exports}}]);