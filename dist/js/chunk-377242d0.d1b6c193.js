(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-377242d0"],{"02f6":function(t,e,a){"use strict";var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid content-area"},[e("div",{staticClass:"panel-body"},[e("div",{staticClass:"panel panel-default"},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-12 mt-3"},[t._t("default")],2)])])])])},s=[],r={name:"ContentArea"},o=r,i=a("2877"),c=Object(i["a"])(o,n,s,!1,null,"4665fdac",null);e["a"]=c.exports},"60b3":function(t,e,a){},"69b9":function(t,e,a){"use strict";a("60b3")},a55b:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t._self._c;return e("content-area",{staticClass:"text-center login-center-container fade-in"},[e("div",{staticClass:"row justify-content-center"},[e("div",{staticClass:"col-lg-3 col-sm-12 col-md-12"},[e("router-link",{staticClass:"ml-3 mt-3 mb-3",attrs:{to:t.ROUTE.HOME}},[e("h1",{staticClass:"text-center eq-header mb-0",staticStyle:{"font-size":"100px"}},[t._v("\n          Spire\n        ")])]),t.hasAuthOptions()?e("eq-window",{staticClass:"fade-in login-box"},[e("form",{staticClass:"m-0 p-0",staticStyle:{top:"50%"},on:{submit:function(e){return e.preventDefault(),t.loginSpire.apply(null,arguments)}}},[t.localAuthEnabled?e("div",{staticClass:"fade-in"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"formGroupExampleInput"}},[t._v("Username")]),e("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],staticClass:"form-control",attrs:{type:"text",autocomplete:"off",id:"username",name:"username",placeholder:"Your username..."},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),e("div",{staticClass:"form-group"},[e("label",{attrs:{for:"formGroupExampleInput2"}},[t._v("Password")]),e("div",{staticClass:"input-group"},["checkbox"===(t.showPassword?"text":"password")?e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{autocomplete:"off",id:"password",name:"password",placeholder:"Your password...",type:"checkbox"},domProps:{checked:Array.isArray(t.password)?t._i(t.password,null)>-1:t.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loginSpire.apply(null,arguments)},change:function(e){var a=t.password,n=e.target,s=!!n.checked;if(Array.isArray(a)){var r=null,o=t._i(a,r);n.checked?o<0&&(t.password=a.concat([r])):o>-1&&(t.password=a.slice(0,o).concat(a.slice(o+1)))}else t.password=s}}}):"radio"===(t.showPassword?"text":"password")?e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{autocomplete:"off",id:"password",name:"password",placeholder:"Your password...",type:"radio"},domProps:{checked:t._q(t.password,null)},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loginSpire.apply(null,arguments)},change:function(e){t.password=null}}}):e("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],staticClass:"form-control",attrs:{autocomplete:"off",id:"password",name:"password",placeholder:"Your password...",type:t.showPassword?"text":"password"},domProps:{value:t.password},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.loginSpire.apply(null,arguments)},input:function(e){e.target.composing||(t.password=e.target.value)}}}),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-dark",attrs:{type:"button"},on:{click:function(e){t.showPassword=!t.showPassword}}},[e("i",{staticClass:"fe fe-lock"}),t._v("\n                      Show Password\n                    ")])])])]),e("button",{staticClass:"btn btn-lg btn-dark btn-block",staticStyle:{color:"white"},attrs:{type:"submit"},on:{click:function(e){return t.loginSpire()}}},[e("i",{staticClass:"fe fe-lock"}),t._v("\n                Spire Login\n              ")])]):t._e(),t.githubAuthEnabled?e("a",{staticClass:"btn btn-lg btn-dark btn-block",staticStyle:{color:"white"},on:{click:function(e){return t.loginGithub()}}},[e("i",{staticClass:"fe fe-github"}),t._v("\n              Sign in with Github\n            ")]):t._e()]),e("info-error-banner",{staticClass:"mt-3",attrs:{slim:!0,notification:t.notification,error:t.error},on:{"dismiss-error":function(e){t.error=""},"dismiss-notification":function(e){t.notification=""}}})],1):t._e()],1)])])},s=[],r=(a("96cf"),a("3b8d")),o=a("02f6"),i=a("49c5"),c=a("80b0"),u=a("0d95"),l=a("5afa"),d=a("038a"),p=a("bc3a"),h=a.n(p),f=a("935a"),m={name:"Login.vue",components:{EqWindow:f["a"],InfoErrorBanner:l["a"],ContentArea:o["a"]},data:function(){return{username:"",password:"",showPassword:!1,error:"",notification:"",localAuthEnabled:!1,githubAuthEnabled:!1,ROUTE:c["a"]}},mounted:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,i["a"].init();case 2:this.localAuthEnabled=i["a"].isLocalAuthEnabled(),this.githubAuthEnabled=i["a"].isGithubAuthEnabled(),this.$router.onReady(Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.$route.query,!(a&&a.user&&a.password)){t.next=7;break}return console.log("login with query params"),e.username=a.user,e.password=a.password,t.next=7,e.loginSpire();case 7:case"end":return t.stop()}}),t)}))));case 5:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),methods:{loginSpire:function(){var t=Object(r["a"])(regeneratorRuntime.mark((function t(){var e,a=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.a.post(u["SpireApi"].getBasePath()+"/auth/login",{username:this.username,password:this.password});case 3:e=t.sent,e.data&&200===e.status&&(this.notification="Login succeeded!",e.data&&e.data.data&&e.data.data.token&&(d["a"].storeAccessToken(e.data.data.token),u["SpireApi"].reloadAxios(),setTimeout((function(){var t=a.$route.query;t.redirect?a.$router.push(t.redirect).catch((function(t){})):a.$router.push(c["a"].HOME).catch((function(t){}))}),100))),t.next=10;break;case 7:t.prev=7,t.t0=t["catch"](0),t.t0.response&&t.t0.response.data&&t.t0.response.data.error&&(this.error=t.t0.response.data.error);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));function e(){return t.apply(this,arguments)}return e}(),hasAuthOptions:function(){return this.githubAuthEnabled||this.localAuthEnabled},loginGithub:function(){var t=this,e=800,a=800,n=screen.width/2-e/2,s=screen.height/2-a/2,r=u["SpireApi"].getBasePath()+"/auth/github",o="Github",i=window.open(r,o,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+e+", height="+a+", top="+s+", left="+n),c=setInterval((function(){i.closed&&(clearInterval(c),t.$router.push({path:"/"}))}),100)}}},w=m,b=(a("69b9"),a("2877")),v=Object(b["a"])(w,n,s,!1,null,"5fa61854",null);e["default"]=v.exports}}]);